<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">






  
  
  <link rel="stylesheet" media="all" href="/lib/Han/dist/han.min.css?v=3.3">




<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="Android,开源库," />










<meta name="description" content="参考：https://gank.io/post/560e15be2dca930e00da1083">
<meta name="keywords" content="Android,开源库">
<meta property="og:type" content="article">
<meta property="og:title" content="开源库-RxJava">
<meta property="og:url" content="http://yannischeng.com/开源库-RxJava/index.html">
<meta property="og:site_name" content="YannisCheng&#39;s Technology Blogs">
<meta property="og:description" content="参考：https://gank.io/post/560e15be2dca930e00da1083">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://yannischeng-img-1258109292.cos.ap-beijing.myqcloud.com/map.png">
<meta property="og:image" content="https://yannischeng-img-1258109292.cos.ap-beijing.myqcloud.com/flatMap.png">
<meta property="og:image" content="https://yannischeng-img-1258109292.cos.ap-beijing.myqcloud.com/1638147-aaca19cbcaa1ff9d.png">
<meta property="og:image" content="https://yannischeng-img-1258109292.cos.ap-beijing.myqcloud.com/concatMap.png">
<meta property="og:image" content="https://yannischeng-img-1258109292.cos.ap-beijing.myqcloud.com/concat.png">
<meta property="og:image" content="https://yannischeng-img-1258109292.cos.ap-beijing.myqcloud.com/1019822-fdfd3e889ea30b34.png">
<meta property="og:image" content="https://yannischeng-img-1258109292.cos.ap-beijing.myqcloud.com/1019822-af11b153c1f5c67d.png">
<meta property="og:image" content="https://yannischeng-img-1258109292.cos.ap-beijing.myqcloud.com/zip.o.png">
<meta property="og:updated_time" content="2019-02-11T11:49:27.173Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="开源库-RxJava">
<meta name="twitter:description" content="参考：https://gank.io/post/560e15be2dca930e00da1083">
<meta name="twitter:image" content="https://yannischeng-img-1258109292.cos.ap-beijing.myqcloud.com/map.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.3',
    sidebar: {"position":"left","display":"always","offset":12,"b2t":false,"scrollpercent":false,"onmobile":true},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yannischeng.com/开源库-RxJava/"/>





  <title>开源库-RxJava | YannisCheng's Technology Blogs</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta custom-logo">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">YannisCheng's Technology Blogs</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">不必一味的讨好别人，每个人都有自己的活法。</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yannischeng.com/开源库-RxJava/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="YannisCheng">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://oy991qm3u.bkt.clouddn.com/%E6%A2%B5%E9%AB%98.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="YannisCheng's Technology Blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">开源库-RxJava</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-01-17T10:32:46+08:00">
                2018-01-17
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2019-02-11T19:49:27+08:00">
                2019-02-11
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Android/" itemprop="url" rel="index">
                    <span itemprop="name">Android</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  2,574 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  11 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    

    
        <div class="post-tags">
          
            <a href="/tags/Android/" rel="tag"># Android</a>
          
            <a href="/tags/开源库/" rel="tag"># 开源库</a>
          
        </div>
      

    
    
    

    
      <div>
        <ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者：</strong>
    YannisCheng
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="http://yannischeng.com/开源库-RxJava/" title="开源库-RxJava">http://yannischeng.com/开源库-RxJava/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>
    尊重个人劳动成果，转载请注明出处。 ─=≡Σ(((つ•̀ω•́)つ))
  </li>
</ul>

      </div>
    



    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        <blockquote>
<p>参考：<a href="https://gank.io/post/560e15be2dca930e00da1083" target="_blank" rel="external">https://gank.io/post/560e15be2dca930e00da1083</a></p>
</blockquote>
<a id="more"></a>
<h1 id="一-准备"><a href="#一-准备" class="headerlink" title="一. 准备"></a>一. 准备</h1><ul>
<li><strong>Java泛型中&lt;？ extends E&gt;和&lt;？ super E&gt;的区别</strong></li>
</ul>
<blockquote>
<p>参考：<a href="http://blog.csdn.net/u014513883/article/details/49820569" target="_blank" rel="external">http://blog.csdn.net/u014513883/article/details/49820569</a></p>
</blockquote>
<ul>
<li><p><strong>PECS法则</strong></p>
<ul>
<li><p><strong>生产者</strong>（Producer）使用<code>extends</code></p>
<pre><code>如果你需要一个**提供**E类型元素的集合，使用泛型通配符&lt;? extends E&gt;。它好比一个生产者，可以提供数据。
</code></pre></li>
<li><p><strong>消费者</strong>（Consumer）使用<code>super</code></p>
<pre><code>如果你需要一个只能**装入**E类型元素的集合，使用泛型通配符&lt;? super E&gt;。它好比一个消费者，可以消费你提供的数据。
</code></pre></li>
<li>既是生产者也是消费者<pre><code>既要存储又要读取，那就别使用泛型通配符
</code></pre></li>
</ul>
</li>
</ul>
<h1 id="二-使用方式"><a href="#二-使用方式" class="headerlink" title="二.  使用方式"></a>二.  使用方式</h1><h2 id="（一）Observable中创造事件序列的方法"><a href="#（一）Observable中创造事件序列的方法" class="headerlink" title="（一）Observable中创造事件序列的方法"></a>（一）Observable中创造事件序列的方法</h2><h3 id="1-create"><a href="#1-create" class="headerlink" title="1. create()"></a>1. create()</h3><h4 id="1-Subscriber完整定义的回调"><a href="#1-Subscriber完整定义的回调" class="headerlink" title="1). Subscriber完整定义的回调"></a>1). Subscriber完整定义的回调</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Subscriber完整定义的回调</span></div><div class="line">Observable.create(<span class="keyword">new</span> Observable.OnSubscribe&lt;String&gt;() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">(Subscriber&lt;? <span class="keyword">super</span> String&gt; subscriber)</span> </span>&#123;</div><div class="line">        subscriber.onNext(<span class="string">"订阅者接收到----Hello"</span>);</div><div class="line">        subscriber.onNext(<span class="string">"订阅者接收到----RxJava"</span>);</div><div class="line">        subscriber.onNext(<span class="string">"订阅者接收到----Android"</span>);</div><div class="line">        subscriber.onCompleted();</div><div class="line">    &#125;</div><div class="line">&#125;).subscribe(<span class="keyword">new</span> Subscriber&lt;String&gt;() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCompleted</span><span class="params">()</span> </span>&#123;&#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onError</span><span class="params">(Throwable e)</span> </span>&#123;&#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onNext</span><span class="params">(String s)</span> </span>&#123;</div><div class="line">        Log.e(TAG, <span class="string">"ヽ(｀Д´)ﾉ -&gt; onNext : "</span> + s);</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h4 id="2-Action1不完整定义的回调"><a href="#2-Action1不完整定义的回调" class="headerlink" title="2). Action1不完整定义的回调"></a>2). Action1不完整定义的回调</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Action1不完整定义的回调</span></div><div class="line">Observable.create(<span class="keyword">new</span> Observable.OnSubscribe&lt;String&gt;() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">(Subscriber&lt;? <span class="keyword">super</span> String&gt; subscriber)</span> </span>&#123;</div><div class="line">        subscriber.onNext(<span class="string">"订阅者接收到----Hello"</span>);</div><div class="line">        subscriber.onNext(<span class="string">"订阅者接收到----RxJava"</span>);</div><div class="line">        subscriber.onNext(<span class="string">"订阅者接收到----Android"</span>);</div><div class="line">        subscriber.onCompleted();</div><div class="line">    &#125;</div><div class="line">&#125;).subscribe(<span class="keyword">new</span> Action1&lt;String&gt;() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">(String s)</span> </span>&#123;</div><div class="line">        Log.e(TAG, <span class="string">"ヽ(｀Д´)ﾉ -&gt; call : "</span> + s);</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h4 id="Action1-和-Action0区别："><a href="#Action1-和-Action0区别：" class="headerlink" title="Action1 和 Action0区别："></a>Action1 和 Action0区别：</h4><ul>
<li><p><strong>Action0</strong>：是 RxJava 的一个接口，它只有一个方法 call()，这个方法是<strong>无参无返回值</strong>的；由于 onCompleted() 方法也是无参无返回值的，因此 Action0 可以被当成一个包装对象，将 onCompleted() 的内容打包起来将自己作为一个参数传入 subscribe() 以实现不完整定义的回调。</p>
</li>
<li><p><strong>Action1</strong> ：也是一个接口，它同样只有一个方法 call(T param)，这个方法也<strong>无返回值，但有一个参数</strong>；与 Action0 同理，由于 <code>onNext(T obj)</code> 和 <code>onError(Throwable error)</code> 也是单参数无返回值的，因此 Action1 可以将 onNext(obj) 和 onError(error) 打包起来传入 subscribe() 以实现不完整定义的回调。</p>
</li>
</ul>
<h3 id="2-just-T…-将传入的参数依次发送出来。"><a href="#2-just-T…-将传入的参数依次发送出来。" class="headerlink" title="2. just(T…) : 将传入的参数依次发送出来。"></a>2. just(T…) : 将传入的参数依次发送出来。</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 使用单个String</span></div><div class="line">Observable.just(<span class="string">"just Hello"</span>, <span class="string">"just RxJava"</span>, <span class="string">"just Android"</span>).subscribe(<span class="keyword">new</span> Action1&lt;String&gt;() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">(String s)</span> </span>&#123;</div><div class="line">        Log.e(TAG, <span class="string">"ヽ(｀Д´)ﾉ -&gt; call : "</span> + s);</div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="comment">// 使用数组效果</span></div><div class="line">String[] strs = <span class="keyword">new</span> String[]&#123;<span class="string">"just Hello"</span>, <span class="string">"just RxJava"</span>, <span class="string">"just Android"</span>&#125;;</div><div class="line">Observable.just(strs).subscribe(<span class="keyword">new</span> Action1&lt;String[]&gt;() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">(String[] strings)</span> </span>&#123;</div><div class="line">        <span class="keyword">for</span> (String item : strings) &#123;</div><div class="line">            Log.e(TAG, <span class="string">"ヽ(｀Д´)ﾉ -&gt; call : "</span> + item);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="comment">// 将会依次调用：</span></div><div class="line"><span class="comment">// onNext("Hello");</span></div><div class="line"><span class="comment">// onNext("Hi");</span></div><div class="line"><span class="comment">// onNext("Aloha");</span></div><div class="line"><span class="comment">// onCompleted();</span></div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * 结果：</span></div><div class="line"><span class="comment"> * just Hello</span></div><div class="line"><span class="comment"> * just RxJava</span></div><div class="line"><span class="comment"> * just Android</span></div><div class="line"><span class="comment"> */</span></div></pre></td></tr></table></figure>
<h3 id="3-from-T-from-Iterable-lt-extends-T-gt-将传入的数组或-Iterable-拆分成具体对象后，依次发送出来。"><a href="#3-from-T-from-Iterable-lt-extends-T-gt-将传入的数组或-Iterable-拆分成具体对象后，依次发送出来。" class="headerlink" title="3. from(T[]) / from(Iterable&lt;? extends T&gt;) : 将传入的数组或 Iterable 拆分成具体对象后，依次发送出来。"></a>3. from(T[]) / from(Iterable&lt;? extends T&gt;) : 将传入的数组或 Iterable 拆分成具体对象后，依次发送出来。</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">// 一下两种方式产生的结果相同</span></div><div class="line"></div><div class="line"><span class="comment">// 方式1</span></div><div class="line">String[] strs = &#123;<span class="string">"From Hello"</span>, <span class="string">"From RxJava"</span>, <span class="string">"From Android"</span>&#125;;</div><div class="line">Observable.from(strs).subscribe(<span class="keyword">new</span> Subscriber&lt;String&gt;() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCompleted</span><span class="params">()</span> </span>&#123;&#125;</div><div class="line"></div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onError</span><span class="params">(Throwable e)</span> </span>&#123;&#125;</div><div class="line"></div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onNext</span><span class="params">(String s)</span> </span>&#123;</div><div class="line">                Log.e(TAG, <span class="string">"ヽ(｀Д´)ﾉ -&gt; onNext haha : "</span> + s);</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line"> </div><div class="line"> <span class="comment">// 方式2</span></div><div class="line">Observable.from(strs).subscribe(<span class="keyword">new</span> Action1&lt;String&gt;() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">(String s)</span> </span>&#123;</div><div class="line">                Log.e(TAG, <span class="string">"ヽ(｀Д´)ﾉ -&gt; call : "</span> + s);</div><div class="line">            &#125;</div><div class="line">        &#125;);</div></pre></td></tr></table></figure>
<h2 id="（二）-线程控制-：-Scheduler"><a href="#（二）-线程控制-：-Scheduler" class="headerlink" title="（二） 线程控制 ： Scheduler"></a>（二） 线程控制 ： Scheduler</h2><h3 id="调度方法："><a href="#调度方法：" class="headerlink" title="调度方法："></a>调度方法：</h3><ul>
<li><p><strong>subscribeOn()</strong> : 指定 subscribe() 所发生的线程，即 Observable.OnSubscribe 被激活时所处的线程。或者叫做<strong>事件产生的线程</strong>。</p>
</li>
<li><p><strong>observeOn()</strong> ：指定 Subscriber 所运行在的线程。或者叫做<strong>事件消费的线程</strong>。</p>
</li>
</ul>
<h3 id="常用线程："><a href="#常用线程：" class="headerlink" title="常用线程："></a>常用线程：</h3><ul>
<li><strong>Schedulers.immediate()</strong> : 直接在当前线程运行，相当于不指定线程。这是<strong>默认的 Scheduler</strong>。</li>
<li><strong>Schedulers.newThread()</strong> ：总是<strong>启用新线程</strong>，并在新线程执行操作。</li>
<li><strong>Schedulers.io()</strong> : I/O 操作（读写文件、读写数据库、网络信息交互等）所使用的 Scheduler。行为模式和 newThread() 差不多，区别在于 io() 的内部实现是是用一个无数量上限的线程池，可以重用空闲的线程，因此多数情况下 io() 比 newThread() 更有效率。顺序有变化。</li>
<li><strong>Schedulers.computation()</strong> : 计算所使用的 Scheduler。这个计算指的是 CPU 密集型计算，即不会被 I/O 等操作限制性能的操作，例如图形的计算。这个 Scheduler 使用的固定的线程池，大小为 CPU 核数。</li>
<li><strong>AndroidSchedulers.mainThread()</strong> ：<strong>Android专用</strong>的 ，它指定的操作将在 Android 主线程运行。</li>
</ul>
<p>示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">Observable.create(<span class="keyword">new</span> Observable.OnSubscribe&lt;Drawable&gt;() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">(Subscriber&lt;? <span class="keyword">super</span> Drawable&gt; subscriber)</span> </span>&#123;</div><div class="line">        Drawable drawable = getResources().getDrawable(R.mipmap.ic_launcher_round);</div><div class="line">        subscriber.onNext(drawable);</div><div class="line">    &#125;</div><div class="line">&#125;).</div><div class="line">        subscribeOn(Schedulers.io()).</div><div class="line">        observeOn(AndroidSchedulers.mainThread()).subscribe(<span class="keyword">new</span> Subscriber&lt;Drawable&gt;() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCompleted</span><span class="params">()</span> </span>&#123;</div><div class="line">        Log.e(TAG, <span class="string">"aboutObservable_03 onCompleted"</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onError</span><span class="params">(Throwable e)</span> </span>&#123;</div><div class="line">        Log.e(TAG, <span class="string">"aboutObservable_03 onError"</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onNext</span><span class="params">(Drawable drawable)</span> </span>&#123;</div><div class="line">        mImage.setImageDrawable(drawable);</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="（三）变换"><a href="#（三）变换" class="headerlink" title="（三）变换"></a>（三）变换</h2><p>将<strong>事件</strong>序列中的<strong>对象</strong>或<strong>整个序列</strong>进行加工处理，转换成<strong>不同的</strong>事件或事件序列。</p>
<h3 id="1-map-返回值为结果集。事件对象的直接变换，是一对一的转化，是-RxJava-最常用的变换。"><a href="#1-map-返回值为结果集。事件对象的直接变换，是一对一的转化，是-RxJava-最常用的变换。" class="headerlink" title="1. map() : 返回值为结果集。事件对象的直接变换，是一对一的转化，是 RxJava 最常用的变换。"></a>1. map() : 返回值为结果集。事件对象的直接变换，是一对一的转化，是 RxJava 最常用的变换。</h3><p><img src="https://yannischeng-img-1258109292.cos.ap-beijing.myqcloud.com/map.png" alt=""></p>
<p><strong>释义</strong></p>
<p>返回一个Observable，它将一个指定的函数应用于源Observable发出的每个项目，并发出这些函数应用程序的结果。</p>
<p>Func1()，包装的是有返回值的方法。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">Observable.just(<span class="string">"images/logo.png"</span>) <span class="comment">// 输入类型 String</span></div><div class="line">    .map(<span class="keyword">new</span> Func1&lt;String, Bitmap&gt;() &#123;</div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> Bitmap <span class="title">call</span><span class="params">(String filePath)</span> </span>&#123; <span class="comment">// 参数类型 String</span></div><div class="line">            <span class="keyword">return</span> getBitmapFromPath(filePath); <span class="comment">// 返回类型 Bitmap</span></div><div class="line">        &#125;</div><div class="line">    &#125;)</div><div class="line">    .subscribe(<span class="keyword">new</span> Action1&lt;Bitmap&gt;() &#123;</div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">(Bitmap bitmap)</span> </span>&#123; <span class="comment">// 参数类型 Bitmap</span></div><div class="line">            showBitmap(bitmap);</div><div class="line">        &#125;</div><div class="line">    &#125;);</div></pre></td></tr></table></figure>
<h3 id="2-flatMap-无顺序。嵌套操作。返回值为-Observable-对象。flat铺平。是一对多的转化。"><a href="#2-flatMap-无顺序。嵌套操作。返回值为-Observable-对象。flat铺平。是一对多的转化。" class="headerlink" title="2. flatMap() : 无顺序。嵌套操作。返回值为 Observable 对象。flat铺平。是一对多的转化。"></a>2. flatMap() : 无顺序。嵌套操作。返回值为 Observable 对象。flat铺平。是一对多的转化。</h3><p><img src="https://yannischeng-img-1258109292.cos.ap-beijing.myqcloud.com/flatMap.png" alt=""></p>
<p><strong>释义</strong></p>
<p>对Observable发射的数据都应用(apply)一个函数，这个函数返回一个Observable，然后合并这些Observables，并且发送（emit）合并的结果。 flatMap和map操作符很相像，flatMap发送的是合并后的Observables，map操作符发送的是应用函数后返回的结果集</p>
<p><strong>原理：</strong></p>
<ul>
<li><ol>
<li><strong>嵌套</strong> ：使用传入的事件对象创建一个 Observable 对象，此处嵌套Observable操作；</li>
</ol>
</li>
<li><ol>
<li>并不发送这个 Observable, 而是将它<strong>激活（Observable执行 “产生数据”的过程，此时，每一个事件产生若干个结果集合）</strong>，但是不发送结果集合；</li>
</ol>
</li>
<li><ol>
<li><strong>合并(merge)操作</strong>  ——  <strong>事件传入顺序 != 传出顺序 -&gt; 顺序混乱</strong>：每一个创建出来的 Observable 发送的事件，都被<strong>汇入同一个</strong> Observable ，而这个 Observable 负责将这些<strong>事件（结果集的集合）**</strong>统一**交给 Subscriber 的回调方法。</li>
</ol>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line">List&lt;Course&gt; list1 = <span class="keyword">new</span> ArrayList&lt;Course&gt;();</div><div class="line">list1.add(<span class="keyword">new</span> Course(<span class="string">"three - Android"</span>, <span class="number">1</span>));</div><div class="line">list1.add(<span class="keyword">new</span> Course(<span class="string">"three - JSP"</span>, <span class="number">3</span>));</div><div class="line"></div><div class="line">List&lt;Course&gt; list2 = <span class="keyword">new</span> ArrayList&lt;Course&gt;();</div><div class="line">list2.add(<span class="keyword">new</span> Course(<span class="string">"three - Object-C"</span>, <span class="number">1</span>));</div><div class="line">list2.add(<span class="keyword">new</span> Course(<span class="string">"three - HTML 5"</span>, <span class="number">2</span>));</div><div class="line"></div><div class="line">StudentInCourse[] students = <span class="keyword">new</span> StudentInCourse[]&#123;</div><div class="line">        <span class="keyword">new</span> StudentInCourse(<span class="string">"张三"</span>, <span class="string">"男"</span>, <span class="number">10</span>, list1),</div><div class="line">        <span class="keyword">new</span> StudentInCourse(<span class="string">"張小盒"</span>, <span class="string">"女"</span>, <span class="number">20</span>, list2),</div><div class="line">&#125;;</div><div class="line">    </div><div class="line">Observable.from(students).</div><div class="line">        flatMap(<span class="keyword">new</span> Func1&lt;StudentInCourse, Observable&lt;Course&gt;&gt;() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> Observable&lt;Course&gt; <span class="title">call</span><span class="params">(StudentInCourse studentInCourse)</span> </span>&#123;</div><div class="line">                <span class="keyword">return</span> Observable.from(studentInCourse.getList());</div><div class="line">            &#125;</div><div class="line">        &#125;).subscribe(<span class="keyword">new</span> Subscriber&lt;Course&gt;() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCompleted</span><span class="params">()</span> </span>&#123;&#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onError</span><span class="params">(Throwable e)</span> </span>&#123;&#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onNext</span><span class="params">(Course course)</span> </span>&#123;</div><div class="line">        Log.e(TAG, <span class="string">"ヽ(｀Д´)ﾉ -&gt; onNext : "</span> + course.toString());</div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * Course&#123;name='three - Android', id=1&#125;</span></div><div class="line"><span class="comment"> * Course&#123;name='three - JSP', id=3&#125;</span></div><div class="line"><span class="comment"> * Course&#123;name='three - Object-C', id=1&#125;</span></div><div class="line"><span class="comment"> * Course&#123;name='three - HTML 5', id=2&#125;</span></div><div class="line"><span class="comment"> */</span></div></pre></td></tr></table></figure>
<h4 id="详细说明："><a href="#详细说明：" class="headerlink" title="详细说明："></a>详细说明：</h4><p>图片来自网络：<a href="https://www.jianshu.com/p/52cd2d514528" target="_blank" rel="external">https://www.jianshu.com/p/52cd2d514528</a></p>
<p><img src="https://yannischeng-img-1258109292.cos.ap-beijing.myqcloud.com/1638147-aaca19cbcaa1ff9d.png" alt=""></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">由上图可以看出Student1、Student2经过flatMap后，按顺序依次经历了Observable1、Observable2，分别转化为Course。</div><div class="line">最后按顺序得到Course1、Course2、Course3、Course4、Course5、Course6，</div><div class="line">其中1-3由Student1得到，4-6由Student2得到。</div></pre></td></tr></table></figure>
<p>我个人是在看到如上的配图+文字说明后，才恍然大悟的。</p>
<h3 id="3-concatMap-：有顺序性。同flatMap-相似"><a href="#3-concatMap-：有顺序性。同flatMap-相似" class="headerlink" title="3. concatMap() ：有顺序性。同flatMap()相似"></a>3. concatMap() ：有顺序性。同flatMap()相似</h3><p><img src="https://yannischeng-img-1258109292.cos.ap-beijing.myqcloud.com/concatMap.png" alt=""></p>
<h3 id="4-1-concat-多个数据源建立联系，one-by-one"><a href="#4-1-concat-多个数据源建立联系，one-by-one" class="headerlink" title="4.1 concat() : 多个数据源建立联系，one by one"></a>4.1 concat() : 多个数据源建立联系，one by one</h3><blockquote>
<p>参考：<a href="https://www.jianshu.com/p/94c433057440" target="_blank" rel="external">https://www.jianshu.com/p/94c433057440</a></p>
</blockquote>
<p><img src="https://yannischeng-img-1258109292.cos.ap-beijing.myqcloud.com/concat.png" alt=""></p>
<p>官方图</p>
<p><img src="https://yannischeng-img-1258109292.cos.ap-beijing.myqcloud.com/1019822-fdfd3e889ea30b34.png" alt=""></p>
<p>网络图：多个数据源一个接一个的连接成为一个数据源</p>
<p><strong>注意：</strong><br> 在使用此方法时，需要搭配<code>onComplete()</code> 或者 <code>onError()</code>。否则，最终返回的结果只能是第一个数据请求得到的结果。</p>
<p><strong>使用场景：</strong></p>
<ul>
<li>4.1 需要同时处理多个数据请求，最终需要将其作为一个统一的数据进行返回。</li>
<li>4.2 依次检查memory、disk和network中是否存在数据，任何一步一旦发现数据后面的操作都不执行。</li>
</ul>
<p><strong>搭配使用：</strong></p>
<ul>
<li><strong>first()</strong> : 请求多数据源时，<strong>只要有一个</strong>请求到数据（满足需求），即<strong>停止</strong>其他请求，动作。</li>
<li><strong>takeFirst()</strong> : 当请求多数据源时，<strong>所有</strong>的请求<strong>都没有数据</strong>时，为null时，不会报异常。</li>
</ul>
<p>示例</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 信息1</span></div><div class="line">Observable&lt;Object&gt; oneOb = Observable.create(<span class="keyword">new</span> Observable.OnSubscribe&lt;Object&gt;() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">(Subscriber&lt;? <span class="keyword">super</span> Object&gt; subscriber)</span> </span>&#123;</div><div class="line">        String one = <span class="string">"商品信息1"</span>;</div><div class="line">        subscriber.onNext(one);</div><div class="line">        subscriber.onCompleted();</div><div class="line">    &#125;</div><div class="line">&#125;).subscribeOn(Schedulers.io());</div><div class="line"></div><div class="line"><span class="comment">// 信息2</span></div><div class="line">Observable&lt;Object&gt; twoOb = Observable.create(<span class="keyword">new</span> Observable.OnSubscribe&lt;Object&gt;() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">(Subscriber&lt;? <span class="keyword">super</span> Object&gt; subscriber)</span> </span>&#123;</div><div class="line">        String one = <span class="string">"这是艺术家的信息"</span>;</div><div class="line">        subscriber.onNext(one);</div><div class="line">        subscriber.onCompleted();</div><div class="line">    &#125;</div><div class="line">&#125;).subscribeOn(Schedulers.io());</div><div class="line"></div><div class="line"><span class="comment">// 信息3</span></div><div class="line">Observable&lt;Object&gt; threeOb = Observable.create(<span class="keyword">new</span> Observable.OnSubscribe&lt;Object&gt;() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">(Subscriber&lt;? <span class="keyword">super</span> Object&gt; subscriber)</span> </span>&#123;</div><div class="line">        Integer one = <span class="number">123</span>;</div><div class="line">        subscriber.onNext(one);</div><div class="line">        subscriber.onCompleted();</div><div class="line">    &#125;</div><div class="line">&#125;).subscribeOn(Schedulers.io());</div><div class="line"></div><div class="line"><span class="comment">// 信息汇总</span></div><div class="line">Observable.concat(oneOb, twoOb, threeOb).observeOn(AndroidSchedulers.mainThread()).subscribe(<span class="keyword">new</span> Action1&lt;Object&gt;() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">(Object o)</span> </span>&#123;</div><div class="line">        Log.e(TAG, <span class="string">"ヽ(｀Д´)ﾉ -&gt; call : "</span> + o.toString());</div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * 商品信息1</span></div><div class="line"><span class="comment"> * 这是艺术家的信息</span></div><div class="line"><span class="comment"> * 123</span></div><div class="line"><span class="comment"> */</span></div><div class="line"> </div><div class="line"> <span class="comment">// 只需要其中一个数据源有数据即可，即停止当前数据请求</span></div><div class="line"> Observable.concat(oneOb, twoOb, threeOb)</div><div class="line"> 	<span class="comment">// first()函数的使用</span></div><div class="line">        .first()</div><div class="line">        .observeOn(AndroidSchedulers.mainThread())</div><div class="line">        .subscribe(<span class="keyword">new</span> Action1&lt;Object&gt;() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">(Object o)</span> </span>&#123;</div><div class="line">        Log.e(TAG, <span class="string">"ヽ(｀Д´)ﾉ -&gt; call : "</span> + o.toString());</div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * 商品信息1</span></div><div class="line"><span class="comment"> */</span></div></pre></td></tr></table></figure>
<h3 id="4-2-merge-合并"><a href="#4-2-merge-合并" class="headerlink" title="4.2 merge() 合并"></a>4.2 merge() 合并</h3><p><img src="https://yannischeng-img-1258109292.cos.ap-beijing.myqcloud.com/1019822-af11b153c1f5c67d.png" alt=""></p>
<h3 id="4-3-compose-组合"><a href="#4-3-compose-组合" class="headerlink" title="4.3 compose() 组合"></a>4.3 compose() 组合</h3><h3 id="5-zip-合并多个数据流，然后发送最终合并的数据。"><a href="#5-zip-合并多个数据流，然后发送最终合并的数据。" class="headerlink" title="5. zip() : 合并多个数据流，然后发送最终合并的数据。"></a>5. zip() : 合并多个数据流，然后发送最终合并的数据。</h3><blockquote>
<p>参考：<a href="http://blog.csdn.net/johnny901114/article/details/51614927" target="_blank" rel="external">http://blog.csdn.net/johnny901114/article/details/51614927</a></p>
</blockquote>
<p><img src="https://yannischeng-img-1258109292.cos.ap-beijing.myqcloud.com/zip.o.png" alt=""></p>
<p><strong>使用场景：</strong></p>
<p>在很多app种都会有图片上传的功能，比如商品的评价，客户端允许用户拍照上传(可能多张)，把图片上传到服务器，然后获取图片的url，再把图片的信息（图片url，图片大小）发送给服务器。</p>
<p>参考代码示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * 1,先把所有的图片上传到又拍云（比如3张图片）</span></div><div class="line"><span class="comment"> * 2,获取图片的url路径，图片大小等</span></div><div class="line"><span class="comment"> * 3,最后把数据全部提交给服务器</span></div><div class="line"><span class="comment"> */</span></div><div class="line"></div><div class="line"><span class="comment">//需要上传的图片</span></div><div class="line">Picture[] ps = xxx;</div><div class="line">Observable.zip(</div><div class="line">        Observable.from(ps),</div><div class="line">        getUpYunAddress(ps.length),<span class="comment">//获取上传的url</span></div><div class="line">        <span class="keyword">new</span> Func2&lt;Picture, UpYunAddress, Picture&gt;() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> Picture <span class="title">call</span><span class="params">(Picture picture, UpYunAddress upYunAddress)</span> </span>&#123;</div><div class="line">                <span class="comment">//如果该图片已经上传则不应该上传</span></div><div class="line">                <span class="keyword">if</span> (TextUtils.isEmpty(picture.getSource())) &#123;</div><div class="line">                    <span class="keyword">try</span> &#123;</div><div class="line">                        <span class="comment">//使用又拍云提供的工具类，上传图片</span></div><div class="line">                        String path = UpYunUtil.uploadImage(upYunAddress, picture.getLocalUrl());</div><div class="line">                        <span class="comment">//获取最终的url</span></div><div class="line">                        String finalUrl = upYunAddress.getPrefix() + path;</div><div class="line">                        picture.setSource(finalUrl);</div><div class="line">                    &#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">                        e.printStackTrace();</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">return</span> picture;</div><div class="line">            &#125;</div><div class="line">        &#125;)</div><div class="line">        .subscribeOn(Schedulers.io())</div><div class="line">        .observeOn(AndroidSchedulers.mainThread())</div><div class="line">        <span class="comment">//上传成功后获取图片大小</span></div><div class="line">        .flatMap(<span class="keyword">new</span> Func1&lt;Picture, Observable&lt;Picture&gt;&gt;() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> Observable&lt;Picture&gt; <span class="title">call</span><span class="params">(Picture picture)</span> </span>&#123;</div><div class="line">                <span class="keyword">if</span> (TextUtils.isEmpty(picture.getHeight()) || TextUtils.isEmpty(picture.getWidth())) &#123;</div><div class="line">                    BitmapFactory.Options options;</div><div class="line">                    <span class="keyword">if</span> (!TextUtils.isEmpty(picture.getLocalUrl())) &#123;</div><div class="line">                        options = ImageUtil.getBitmapOptions(picture.getLocalUrl());</div><div class="line">                        picture.setLocalUrl(<span class="keyword">null</span>);</div><div class="line">                    &#125; <span class="keyword">else</span> &#123;</div><div class="line">                        options = ImageUtil.getBitmapOptions(picture.getSource());</div><div class="line">                    &#125;</div><div class="line">                    picture.setWidth(String.valueOf(options.outWidth));</div><div class="line">                    picture.setHeight(String.valueOf(options.outHeight));</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">return</span> Observable.just(picture);</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        <span class="comment">//最后处理最终的数据。</span></div></pre></td></tr></table></figure>
<h3 id="4-filter-：集合进行过滤"><a href="#4-filter-：集合进行过滤" class="headerlink" title="4. filter() ：集合进行过滤"></a>4. filter() ：集合进行过滤</h3><h3 id="5-each-：遍历集合"><a href="#5-each-：遍历集合" class="headerlink" title="5. each() ：遍历集合"></a>5. each() ：遍历集合</h3><h3 id="6-take-：取出集合中的前几个"><a href="#6-take-：取出集合中的前几个" class="headerlink" title="6. take() ：取出集合中的前几个"></a>6. take() ：取出集合中的前几个</h3><h3 id="7-skip-：跳过前几个元素"><a href="#7-skip-：跳过前几个元素" class="headerlink" title="7. skip() ：跳过前几个元素"></a>7. skip() ：跳过前几个元素</h3>
      
    </div>
    
    
    

    

    


    <footer class="post-footer">
      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/Android View-点击事件分发机制/" rel="next" title="View - 点击事件分发机制">
                <i class="fa fa-chevron-left"></i> View - 点击事件分发机制
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/EChart第三方JS库图表html文档示例/" rel="prev" title="EChart第三方JS库图表html文档示例">
                EChart第三方JS库图表html文档示例 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
      <div id="sidebar-dimmer"></div>
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="http://oy991qm3u.bkt.clouddn.com/%E6%A2%B5%E9%AB%98.gif"
                alt="YannisCheng" />
            
              <p class="site-author-name" itemprop="name">YannisCheng</p>
              <p class="site-description motion-element" itemprop="description">不必一味的讨好别人，每个人都有自己的活法。</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">125</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">24</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">63</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          <div class="links-of-author motion-element">
            
              
                <span class="links-of-author-item">
                  <a href="https://github.com/YannisCheng" target="_blank" title="GitHub">
                    
                      <i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  <a href="mailto:cwj1714@163.com" target="_blank" title="E-Mail">
                    
                      <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
            
          </div>

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#一-准备"><span class="nav-number">1.</span> <span class="nav-text">一. 准备</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#二-使用方式"><span class="nav-number">2.</span> <span class="nav-text">二.  使用方式</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#（一）Observable中创造事件序列的方法"><span class="nav-number">2.1.</span> <span class="nav-text">（一）Observable中创造事件序列的方法</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-create"><span class="nav-number">2.1.1.</span> <span class="nav-text">1. create()</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-Subscriber完整定义的回调"><span class="nav-number">2.1.1.1.</span> <span class="nav-text">1). Subscriber完整定义的回调</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-Action1不完整定义的回调"><span class="nav-number">2.1.1.2.</span> <span class="nav-text">2). Action1不完整定义的回调</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Action1-和-Action0区别："><span class="nav-number">2.1.1.3.</span> <span class="nav-text">Action1 和 Action0区别：</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-just-T…-将传入的参数依次发送出来。"><span class="nav-number">2.1.2.</span> <span class="nav-text">2. just(T…) : 将传入的参数依次发送出来。</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-from-T-from-Iterable-lt-extends-T-gt-将传入的数组或-Iterable-拆分成具体对象后，依次发送出来。"><span class="nav-number">2.1.3.</span> <span class="nav-text">3. from(T[]) / from(Iterable<? extends T>) : 将传入的数组或 Iterable 拆分成具体对象后，依次发送出来。</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#（二）-线程控制-：-Scheduler"><span class="nav-number">2.2.</span> <span class="nav-text">（二） 线程控制 ： Scheduler</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#调度方法："><span class="nav-number">2.2.1.</span> <span class="nav-text">调度方法：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#常用线程："><span class="nav-number">2.2.2.</span> <span class="nav-text">常用线程：</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#（三）变换"><span class="nav-number">2.3.</span> <span class="nav-text">（三）变换</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-map-返回值为结果集。事件对象的直接变换，是一对一的转化，是-RxJava-最常用的变换。"><span class="nav-number">2.3.1.</span> <span class="nav-text">1. map() : 返回值为结果集。事件对象的直接变换，是一对一的转化，是 RxJava 最常用的变换。</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-flatMap-无顺序。嵌套操作。返回值为-Observable-对象。flat铺平。是一对多的转化。"><span class="nav-number">2.3.2.</span> <span class="nav-text">2. flatMap() : 无顺序。嵌套操作。返回值为 Observable 对象。flat铺平。是一对多的转化。</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#详细说明："><span class="nav-number">2.3.2.1.</span> <span class="nav-text">详细说明：</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-concatMap-：有顺序性。同flatMap-相似"><span class="nav-number">2.3.3.</span> <span class="nav-text">3. concatMap() ：有顺序性。同flatMap()相似</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1-concat-多个数据源建立联系，one-by-one"><span class="nav-number">2.3.4.</span> <span class="nav-text">4.1 concat() : 多个数据源建立联系，one by one</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-2-merge-合并"><span class="nav-number">2.3.5.</span> <span class="nav-text">4.2 merge() 合并</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-3-compose-组合"><span class="nav-number">2.3.6.</span> <span class="nav-text">4.3 compose() 组合</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-zip-合并多个数据流，然后发送最终合并的数据。"><span class="nav-number">2.3.7.</span> <span class="nav-text">5. zip() : 合并多个数据流，然后发送最终合并的数据。</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-filter-：集合进行过滤"><span class="nav-number">2.3.8.</span> <span class="nav-text">4. filter() ：集合进行过滤</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-each-：遍历集合"><span class="nav-number">2.3.9.</span> <span class="nav-text">5. each() ：遍历集合</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-take-：取出集合中的前几个"><span class="nav-number">2.3.10.</span> <span class="nav-text">6. take() ：取出集合中的前几个</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-skip-：跳过前几个元素"><span class="nav-number">2.3.11.</span> <span class="nav-text">7. skip() ：跳过前几个元素</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2016 &mdash; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">YannisCheng</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">Site words total count&#58;</span>
    
    <span title="Site words total count">269.0k</span>
  
</div>













        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.3"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.3"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	





  





  












  





  

  

  
  

  
  


  
  <script type="text/javascript" src="/js/src/js.cookie.js?v=5.1.3"></script>
  <script type="text/javascript" src="/js/src/scroll-cookie.js?v=5.1.3"></script>


  


<script type="text/javascript" color="18,146,19" opacity='0.7' zIndex="-1" count="0" src="//cdn.bootcss.com/canvas-nest.js/1.0.1/canvas-nest.min.js"></script>

</body>
</html>
