<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="Android, 开发，安卓，ANdroid studio，java" />










<meta name="description" content="不必一味的讨好别人，每个人都有自己的活法。">
<meta property="og:type" content="website">
<meta property="og:title" content="YannisCheng&#39;s Technology Blogs">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="YannisCheng&#39;s Technology Blogs">
<meta property="og:description" content="不必一味的讨好别人，每个人都有自己的活法。">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="YannisCheng&#39;s Technology Blogs">
<meta name="twitter:description" content="不必一味的讨好别人，每个人都有自己的活法。">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":true},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>YannisCheng's Technology Blogs</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta custom-logo">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">YannisCheng's Technology Blogs</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">不必一味的讨好别人，每个人都有自己的活法。</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/10/24/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="YannisCheng">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/header.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="YannisCheng's Technology Blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/10/24/hello-world/" itemprop="url">Hello World</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-10-24T23:32:48+08:00">
                2017-10-24
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2017-10-24T23:53:25+08:00">
                2017-10-24
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/博客/" itemprop="url" rel="index">
                    <span itemprop="name">博客</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  78 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  1 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/10/23/Python3  15-I:O/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="YannisCheng">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/header.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="YannisCheng's Technology Blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/10/23/Python3  15-I:O/" itemprop="url">未命名</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-10-23T23:51:37+08:00">
                2017-10-23
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2017-10-24T09:55:19+08:00">
                2017-10-24
              </time>
            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  1,162 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  4 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>#Python3  15-I/O</p>
<blockquote>
<p>2017年07月21日09:10:24</p>
</blockquote>
<p>####关于<code>Open()</code>源码文档</p>
<p>打开文件并返回流。失败时提高IOError。</p>
<pre><code>文件是一个文本或字节串，给出要打开的文件的名称（如果文件不在当前工作目录中的路径）或要包装的文件的整数文件描述符。 （如果给出了一个文件描述符，则当返回的I / O对象关闭时，它将被关闭，除非closefd设置为False。）mode是一个可选字符串，用于指定文件打开的方式。它默认为&apos;r&apos;，这意味着在文本模式下打开阅读。其他常见的值是“w”用于写入（截断文件已存在），“x”用于创建和写入新文件，“a”用于附加（在某些Unix系统上，这意味着所有写入都附加到无论当前查找位置如何，文件的结尾）。在文本模式下，如果未指定编码，则使用的编码与平台相关：调用locale.getpreferredencoding（False）以获取当前语言环境编码。 （用于读取和写入原始字节使用二进制模式并保留编码未指定。）可用的模式有：

    &apos;r&apos;开放阅读（默认）
    &apos;w&apos;打开写入，首先截断文件
    &apos;x&apos;创建一个新文件并将其打开以进行写入
    &apos;a&apos;开放写作，如果文件存在，则附加到文件末尾
    &apos;b&apos;二进制模式
    &apos;t&apos;文字模式（默认）
    &apos;+&apos;打开一个磁盘文件进行更新（读写）
    &apos;U&apos;通用换行模式（弃用）

默认模式为“rt”（打开阅读文本）。对于二进制随机访问，模式&apos;w + b&apos;打开并将文件截断为0字节，而&apos;r + b&apos;打开文件而不截断。如果文件已经存在，&apos;x&apos;模式意味着&apos;w&apos;并引发一个`FileExistsError`。

Python区分以二进制和文本模式打开的文件，即使底层操作系统没有。文件以二进制模式打开（将&apos;b&apos;追加到模式参数）返回内容作为字节对象而不进行任何解码。在文本模式（默认情况下，或在模式参数附加了&apos;t&apos;）时，文件的内容将返回为字符串，首先使用平台相关编码对字节进行了解码，如果给出，则使用指定的编码。

&apos;U&apos;模式已被弃用，并会在将来的Python版本中引发异常。它对Python 3没有影响。使用换行来控制通用换行符模式。缓冲是用于设置缓冲策略的可选整数。通过0以切换缓冲（仅允许在二进制模式下），1选择行缓冲（仅在文本模式下可用），整数&gt; 1表示固定大小的块缓冲区的大小。当没有给出缓冲参数时，默认缓冲策略的工作原理如下：

*二进制文件以固定大小的块进行缓冲;使用启发式方法来选择缓冲区的大小，试图确定底层设备的“块大小”并落回到“io.DEFAULT_BUFFER_SIZE”上。在许多系统上，缓冲区通常为4096或8192字节长。

*“交互式”文本文件（其中isatty（）返回True的文件）使用行缓冲。其他文本文件使用上述针对二进制文件的策略。

encoding是用于对文件进行解码或编码的编码名称。这只能在文本模式下使用。默认编码是平台依赖的，但是Python可以支持任何编码。有关支持的编码列表，请参阅编解码器模块。

errors是一个可选的字符串，指定如何处理编码错误 - 此参数不应在二进制模式下使用。如果存在编码错误（默认值为None）具有相同的效果，则通过&apos;strict&apos;来引发ValueError异常，或者通过&apos;ignore&apos;忽略错误。 （请注意，忽略编码错误可能导致数据丢失。）有关编码错误字符串的列表，请参阅codecs.register的文档或运行&apos;help（codecs.Codec）&apos;。

换行符控制通用换行符的工作原理（仅适用于文本模式）。它可以是无，&apos;&apos;，&apos;\ n&apos;，&apos;\ r&apos;和&apos;\ r \ n&apos;。它的工作原理如下：

*输入时，如果换行符为None，则启用通用换行符模式。输入中的行可以&apos;\ n&apos;，&apos;\ r&apos;或&apos;\ r \ n&apos;结尾，并将它们转换为&apos;\ n&apos;，然后返回给调用者。如果是&apos;&apos;，则启用通用换行模式，但是行结束将返回给未经翻译的调用者。如果它具有任何其他合法值，则输入行仅由给定终止
</code></pre><h1 id="2017年07月21日09-44-52-暂停"><a href="#2017年07月21日09-44-52-暂停" class="headerlink" title="2017年07月21日09:44:52 暂停"></a>2017年07月21日09:44:52 暂停</h1>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/10/23/Python3  14-调试/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="YannisCheng">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/header.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="YannisCheng's Technology Blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/10/23/Python3  14-调试/" itemprop="url">未命名</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-10-23T23:51:37+08:00">
                2017-10-23
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2017-10-24T16:09:42+08:00">
                2017-10-24
              </time>
            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  1,139 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  5 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>#Python3  14-调试</p>
<blockquote>
<p>2017年07月20日09:06:48</p>
</blockquote>
<p>###调试<br><strong>方法</strong></p>
<p>####1.<code>print()</code>打印<br>用print()最大的坏处是将来还得删掉它，想想程序里到处都是print()，运行结果也会包含很多垃圾信息。</p>
<p>####2.<code>assert</code>断言<br>凡是用<code>print()</code>来辅助查看的地方，都可以用断言<code>assert</code>来替代。<br>代码示例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(s)</span>:</span></div><div class="line">    n = int(s)</div><div class="line">    <span class="keyword">assert</span> n != <span class="number">0</span>, <span class="string">'n is zero!'</span></div><div class="line">    <span class="keyword">return</span> <span class="number">10</span> / n</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></div><div class="line">    foo(<span class="string">'0'</span>)</div></pre></td></tr></table></figure>
<p>在程序中使用<code>assert</code>和<code>print()</code>相比也好不到哪去。<br><strong>但是：启动Python解释器时可以用-O参数来关闭assert</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ python3 -O err.py</div></pre></td></tr></table></figure>
<p><strong>关闭后，你可以把所有的assert语句当成pass来看。</strong></p>
<p>####3.<code>logging</code>日志</p>
<p>把<code>print()</code>替换为<code>logging</code>是第3种方式，和<code>assert</code>比，<code>logging</code>不但会抛出错误，而且可以输出到文件。<br><strong>注意：导入logging包之后，应在添加配置语句<code>logging.basicConfig(level=logging.INFO)</code></strong><br>代码示例</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> logging</div><div class="line"><span class="comment"># logging.basicConfig(level=logging.INFO)</span></div><div class="line"><span class="comment"># 配置日志信息</span></div><div class="line">logging.basicConfig(level=logging.DEBUG,</div><div class="line">          format=<span class="string">'%(asctime)-8s %(name)-8s %(levelname)-8s %(message)s  - [%(filename)s:%(lineno)s]'</span>,</div><div class="line">          datefmt=<span class="string">'%Y-%m-%d %H:%M:%S'</span>,</div><div class="line">          filename=<span class="string">'myapp.log'</span>,</div><div class="line">          filemode=<span class="string">'w'</span>)</div><div class="line"></div><div class="line"><span class="comment"># 定义一个Handler打印INFO及以上级别的日志到sys.stderr</span></div><div class="line">console = logging.StreamHandler()</div><div class="line">console.setLevel(logging.DEBUG)</div><div class="line"></div><div class="line"><span class="comment"># 设置控制台日志打印格式</span></div><div class="line">formatter = logging.Formatter(<span class="string">'%(name)-12s: %(levelname)-8s %(message)s'</span>)</div><div class="line">console.setFormatter(formatter)</div><div class="line"></div><div class="line"><span class="comment"># 将定义好的console日志handler添加到root logger</span></div><div class="line">logging.getLogger(<span class="string">''</span>).addHandler(console)</div><div class="line"></div><div class="line"><span class="string">"""测试logging"""</span></div><div class="line">s = <span class="string">'0'</span></div><div class="line">n = int(s)</div><div class="line">logging.info(<span class="string">'n = %d'</span> % n)</div><div class="line">print(<span class="number">10</span> / n)</div><div class="line"></div><div class="line"><span class="string">'''</span></div><div class="line"><span class="string">结果输出</span></div><div class="line"><span class="string">INFO:root:n = 0</span></div><div class="line"><span class="string">Traceback (most recent call last):</span></div><div class="line"><span class="string">  File "/Users/yannischeng/PycharmProjects/First_Python_Project/py_obj_end_12/TestObj.py", line 69, in &lt;module&gt;</span></div><div class="line"><span class="string">    print(10 / n)</span></div><div class="line"><span class="string">ZeroDivisionError: division by zero</span></div><div class="line"><span class="string">'''</span></div><div class="line"><span class="string">'''</span></div><div class="line"><span class="string">输出到文件中的信息：</span></div><div class="line"><span class="string">2017-07-20 09:57:51 root     INFO     n = 0  - [LogSet.py:27]</span></div><div class="line"><span class="string">'''</span></div></pre></td></tr></table></figure>
<p><strong>优点</strong></p>
<ul>
<li>允许你指定记录信息的级别，有<code>debug</code>，<code>info</code>，<code>warning</code>，<code>error</code>等几个级别。</li>
<li>通过简单的配置，一条语句可以同时输出到不同的地方，比如<code>console</code>和<code>文件</code>。</li>
</ul>
<p><strong>参考</strong></p>
<blockquote>
<p>logging的配置参考：<a href="http://blog.csdn.net/naiveloafer/article/details/7630903" target="_blank" rel="external">http://blog.csdn.net/naiveloafer/article/details/7630903</a></p>
</blockquote>
<p><strong>Format编写</strong></p>
<table>
<thead>
<tr>
<th style="text-align:center">Format</th>
<th style="text-align:center">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">%(name)s</td>
<td style="text-align:center">Name of the logger (logging channel).</td>
</tr>
</tbody>
</table>
<p>%(levelno)s |Numeric logging level for the message (DEBUG, INFO, WARNING, ERROR, CRITICAL).<br>%(levelname)s |Text logging level for the message (‘DEBUG’, ‘INFO’, ‘WARNING’, ‘ERROR’, ‘CRITICAL’).<br>%(pathname)s |Full pathname of the source file where the logging call was issued (if available).<br>%(filename)s |   Filename portion of pathname.<br>%(module)s | Module (name portion of filename).<br>%(funcName)s |   Name of function containing the logging call.<br>%(lineno)d | Source line number where the logging call was issued (if available).<br>%(created)f | Time when the LogRecord was created (as returned by time.time()).<br>%(relativeCreated)d   | Time in milliseconds when the LogRecord was created, relative to the time the logging module was loaded.<br>%(asctime)s |Human-readable time when the LogRecord was created. By default this is of the form “2003-07-08 16:49:45,896” (the numbers after the comma are millisecond portion of the time).<br>%(msecs)d |  Millisecond portion of the time when the LogRecord was created.<br>%(thread)d | Thread ID (if available).<br>%(threadName)s | Thread name (if available).<br>%(process)d | Process ID (if available).<br>%(message)s | The logged message, computed as msg % args.</p>
<p><strong>basicConfig()编写</strong></p>
<p>对日志记录系统进行基本配置：</p>
<ul>
<li>如果根记录器已经具有处理程序，则此函数不起作用配置。这是一个方便的方法，供简单的脚本使用做一次性配置的日志记录包。</li>
<li>默认行为是创建一个写入的StreamHandler sys.stderr，使用BASIC_FORMAT格式字符串设置格式化程序，和将处理程序添加到根记录器。</li>
<li>可以指定一些可选的关键字参数，这可以改变默认行为。</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">Optional Keyword</th>
<th style="text-align:center">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">filename</td>
<td style="text-align:center">指定使用指定的FileHandler进行创建文件名，而不是一个StreamHandler。</td>
</tr>
</tbody>
</table>
<pre><code>filemode | 指定打开文件的方式，如果指定了filename（如果filemode未指定，则默认为&apos;a&apos;）。
format | 为处理程序使用指定的格式字符串。
datefmt | 使用指定的日期/时间格式。
style | 如果指定了格式字符串，请使用此字符串指定格式字符串的类型（可能的值&apos;％&apos;，&apos;{&apos;，&apos;$&apos;，for ％-formatting，：meth：`str.format`和：class：`string.Template` - 默认为&apos;％&apos;）。
level | 将根记录器级别设置为指定级别。
stream | 使用指定的流来初始化StreamHandler。注意该参数与“filename”不兼容 - 如果同时使用存在，“流”被忽略。
handlers | 如果指定，这应该是已经创建的迭代处理程序，将被添加到根处理程序。任何处理程序在没有格式化程序分配的列表中分配在此函数中创建的格式化程序。
</code></pre><p><strong><em>请注意：</em></strong></p>
<p>可以指定使用open（filename，mode）创建的流而不是传递文件名和模式。但是应该记住StreamHandler并不关闭它的流（因为它可能使用sys.stdout或sys.stderr），而FileHandler关闭其流当处理程序关闭时。</p>
<p>####4.调试器<code>pdb</code> – 有了PyCharm目前不考虑此种方式</p>
<p>启动Python的调试器pdb，让程序以单步方式运行，可以随时查看运行状态。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/10/23/Python3  14-单元测试/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="YannisCheng">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/header.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="YannisCheng's Technology Blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/10/23/Python3  14-单元测试/" itemprop="url">未命名</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-10-23T23:51:37+08:00">
                2017-10-23
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2017-10-24T09:55:11+08:00">
                2017-10-24
              </time>
            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  498 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  2 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>#Python3  14-单元测试</p>
<blockquote>
<p>2017年07月20日10:45:35</p>
</blockquote>
<p>####单元测试</p>
<ul>
<li>“测试驱动开发”（TDD：Test-Driven Development）– 单元测试</li>
<li>是用来对一个模块、一个函数或者一个类来进行正确性检验的测试工作。</li>
</ul>
<p>####在pycharm中创建单元测试</p>
<blockquote>
<p>创建参考：<a href="http://blog.csdn.net/u013088062/article/details/50183789" target="_blank" rel="external">http://blog.csdn.net/u013088062/article/details/50183789</a><br>一个案例：<a href="http://www.cnblogs.com/iamjqy/p/7155315.html" target="_blank" rel="external">http://www.cnblogs.com/iamjqy/p/7155315.html</a></p>
</blockquote>
<p>具体创建过程参考python文件夹的<code>.png</code>图片。</p>
<ul>
<li>选中待要编写测试代码的类名 –&gt; 右键 选择 <code>Go To</code> –&gt; <code>Test Object</code></li>
</ul>
<p>####单元测试实现</p>
<p>#####待测试类代码<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyDict</span><span class="params">(dict)</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, **kwargs)</span>:</span></div><div class="line">        super().__init__(**kwargs)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getattr__</span><span class="params">(self, item)</span>:</span></div><div class="line">        <span class="keyword">try</span>:</div><div class="line">            <span class="keyword">return</span> self[item]</div><div class="line">        <span class="keyword">except</span> KeyError:</div><div class="line">            <span class="keyword">raise</span> AttributeError(<span class="string">r"'MyDict' object has no attribute '%s'"</span> % item)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__setattr__</span><span class="params">(self, key, value)</span>:</span></div><div class="line">        self[key]  = value</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">add</span><span class="params">(self, m, n)</span>:</span></div><div class="line">        print(<span class="string">"%d + %d = %d"</span> % (m, n, (m+n)))</div></pre></td></tr></table></figure></p>
<p>#####单元测试类代码</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> unittest <span class="keyword">import</span> TestCase</div><div class="line"></div><div class="line"><span class="keyword">from</span> py_unittext_14.MyDict <span class="keyword">import</span> MyDict</div><div class="line"></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">TestMyDict</span><span class="params">(TestCase)</span>:</span></div><div class="line"></div><div class="line">    <span class="comment"># setUp与tearDown</span></div><div class="line">    <span class="comment"># 这两个方法会分别在每调用一个测试方法的前后分别被执行。</span></div><div class="line">    <span class="comment"># setUp()和tearDown()方法有什么用呢？设想你的测试需要启动一个数据库，这时，就可以在setUp()方法中连接数据库，在tearDown()方法中关闭数据库，这样，不必在每个测试方法中重复相同的代码</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">setUp</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">'setUp...'</span>)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">tearDown</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">'tearDown...'</span>)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test_add</span><span class="params">(self)</span>:</span></div><div class="line">        d = MyDict(name=<span class="string">'cwj'</span>, age=<span class="string">'24'</span>, city=<span class="string">'Tianjin'</span>)</div><div class="line">        self.assertEqual(d.name, <span class="string">'cwj'</span>)</div><div class="line">        self.assertEqual(d[<span class="string">'name'</span>], <span class="string">'cwj'</span>)</div><div class="line">        print(d.name)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test_add2</span><span class="params">(self)</span>:</span></div><div class="line">        d = MyDict(name=<span class="string">'cwj'</span>, age=<span class="string">'24'</span>, city=<span class="string">'Tianjin'</span>)</div><div class="line">        d.add(<span class="number">3</span>, <span class="number">4</span>)</div></pre></td></tr></table></figure>
<p>#####测试结果</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">setUp...</div><div class="line">cwj</div><div class="line">tearDown...</div><div class="line"></div><div class="line">setUp...</div><div class="line"><span class="number">3</span> + <span class="number">4</span> = <span class="number">7</span></div><div class="line">tearDown...</div><div class="line"></div><div class="line">Ran <span class="number">2</span> tests <span class="keyword">in</span> <span class="number">0.002</span>s</div><div class="line"></div><div class="line">OK</div></pre></td></tr></table></figure>
<p>####小结</p>
<ul>
<li>单元测试可以有效地测试某个程序模块的行为，是未来重构代码的信心保证。</li>
<li>单元测试的测试用例要覆盖常用的输入组合、边界条件和异常。</li>
<li>单元测试代码要非常简单，如果测试代码太复杂，那么测试代码本身就可能有bug。</li>
<li>单元测试通过了并不意味着程序就没有bug了，但是不通过程序肯定有bug。</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/10/23/Python3  13-错误+测试+调试/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="YannisCheng">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/header.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="YannisCheng's Technology Blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/10/23/Python3  13-错误+测试+调试/" itemprop="url">未命名</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-10-23T23:51:37+08:00">
                2017-10-23
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2017-10-24T09:55:07+08:00">
                2017-10-24
              </time>
            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  459 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  2 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>#Python3  13-错误+测试+调试</p>
<blockquote>
<p>2017年07月19日17:19:31</p>
</blockquote>
<p>###错误</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">try</span>:</div><div class="line">    <span class="string">"""</span></div><div class="line"><span class="string">    可能出错的代码块</span></div><div class="line"><span class="string">    """</span></div><div class="line"><span class="keyword">except</span> ZeroDivisionError <span class="keyword">as</span> e:</div><div class="line">    print(<span class="string">'except:'</span>, e)</div><div class="line"><span class="keyword">finally</span>:</div><div class="line">    print(<span class="string">'finally...'</span>)</div></pre></td></tr></table></figure>
<p>####错误特点</p>
<ol>
<li><em><code>Python</code>的错误其实也是<code>class</code>，所有的错误类型都继承自<code>BaseException</code>，所以在使用<code>except</code>时需要注意的是，它不但捕获该类型的错误，还把其子类也“一网打尽”。</em></li>
<li><em>使用<code>try...except</code>捕获错误还有一个巨大的好处，就是可以跨越多层调用，即：不需要在每个可能出错的地方去捕获错误，只要在合适的层次去捕获错误就可以了。比如函数<code>main()</code>调用<code>foo()</code>，<code>foo()</code>调用<code>bar()</code>，结果<code>bar()</code>出错了。这时，只要<code>main()</code>捕获到了就可以处理<code>bar()</code>中的错误。</em></li>
</ol>
<p>####记录错误</p>
<ul>
<li>捕获错误，把错误堆栈打印出来，分析错误原因，同时，让程序继续执行下去而不是使得程序被结束。</li>
</ul>
<p><strong>使用方法</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> logging</div><div class="line"><span class="comment"># 同样是出错，但程序打印完错误信息后会继续执行，并正常退出.</span></div><div class="line"><span class="comment"># 通过配置，logging还可以把错误记录到日志文件里，方便事后排查。</span></div><div class="line"></div><div class="line"><span class="keyword">try</span>:</div><div class="line">    bar(<span class="string">'0'</span>)</div><div class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</div><div class="line">    logging.exception(e)</div></pre></td></tr></table></figure>
<p>####抛出错误</p>
<ul>
<li>因为错误是class。捕获一个错误就是捕获到该class的一个实例。</li>
<li>既可以使用python的内置函数抛出错误，也可以自己编写函数抛出错误。</li>
</ul>
<p><strong>使用关键字<code>raise</code>抛出一个错误实例</strong> </p>
<p>代码示例</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 编写自定义异常类</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">FooError</span><span class="params">(ValueError)</span>:</span></div><div class="line">    <span class="keyword">pass</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(s)</span>:</span></div><div class="line">    n = int(s)</div><div class="line">    <span class="keyword">if</span> n==<span class="number">0</span>:</div><div class="line">        <span class="keyword">raise</span> FooError(<span class="string">'invalid value: %s'</span> % s)</div><div class="line">    <span class="keyword">return</span> <span class="number">10</span> / n</div><div class="line"></div><div class="line"><span class="comment"># 调用自定义的异常类</span></div><div class="line">foo(<span class="string">'0'</span>)</div><div class="line"></div><div class="line"><span class="comment"># 报的错误</span></div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"err_throw.py"</span>, line <span class="number">11</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">    foo(<span class="string">'0'</span>)</div><div class="line">  File <span class="string">"err_throw.py"</span>, line <span class="number">8</span>, <span class="keyword">in</span> foo</div><div class="line">    <span class="keyword">raise</span> FooError(<span class="string">'invalid value: %s'</span> % s)</div><div class="line">__main__.FooError: invalid value: <span class="number">0</span></div></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/10/23/Python3  12-面向对象+元类/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="YannisCheng">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/header.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="YannisCheng's Technology Blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/10/23/Python3  12-面向对象+元类/" itemprop="url">未命名</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-10-23T23:51:37+08:00">
                2017-10-23
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2017-10-24T09:55:03+08:00">
                2017-10-24
              </time>
            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  632 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  3 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>#Python3  12-面向对象+元类</p>
<blockquote>
<p>2017年07月19日15:13:37</p>
</blockquote>
<p>静态语言和动态语言最大的不同，就是<code>函数</code>和<code>类</code>的定义。不是编译时定义的，而是运行时动态编译的。</p>
<p>关键字：<strong><em>type()</em></strong>, <strong><em>metaclass</em></strong></p>
<h4 id="1-一般的class创建"><a href="#1-一般的class创建" class="headerlink" title="1.一般的class创建"></a>1.一般的class创建</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Hello</span><span class="params">(object)</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">hello</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">'Hello World !'</span>)</div><div class="line"></div><div class="line"><span class="keyword">from</span> py_obj_end_12.Hello <span class="keyword">import</span> Hello</div><div class="line"></div><div class="line"><span class="string">"""导入Hello类后的测试"""</span></div><div class="line">h = Hello()</div><div class="line">print(h.hello())  <span class="comment"># Hello World !</span></div><div class="line"></div><div class="line"><span class="comment"># 查看实例h所属的类型，是class Hello</span></div><div class="line">print(type(h))  <span class="comment"># &lt;class 'py_obj_end_12.Hello.Hello'&gt;</span></div><div class="line"></div><div class="line"><span class="comment"># 查看Hello所属的类型，是 type 类型</span></div><div class="line">print(type(Hello))  <span class="comment"># &lt;class 'type'&gt;</span></div></pre></td></tr></table></figure>
<h4 id="2-使用type-来动态创建类"><a href="#2-使用type-来动态创建类" class="headerlink" title="2.使用type()来动态创建类"></a>2.使用<code>type()</code>来动态创建类</h4><p>#####<code>type</code> 是什么？为什么 <code>Hello</code> 会是 <code>type</code> 类型的？</p>
<ul>
<li>因为<code>Python</code>是<code>动态语言</code>，所以<code>class</code>的定义是运行时动态创建的，而创建<code>class</code>使用的就是<code>type()</code>函数</li>
<li><code>type()</code>函数既可以返回一个<code>对象的类型</code>，又可以创建出<code>新的类型</code>。</li>
</ul>
<p>#####通过type()创建class和直接写class是完全一样的。</p>
<ul>
<li>因为<code>python</code>解释器遇到<code>class</code>定义时，仅仅是扫描一下<code>class</code>定义的语法，然后调用<code>type()</code>函数创建出<code>class</code>。</li>
<li>正常情况下，我们使用<code>class Xxx</code>创建一个类。但是，因为<code>type()</code>函数允许我们动态的将类创建出来。</li>
<li><code>动态语言</code>本身支持处于运行期的程序动态创建一个类。这和<code>Java</code>的<code>静态语言</code>不同。</li>
</ul>
<blockquote>
<p><code>type()</code>使用：<a href="http://www.cnblogs.com/ccorz/p/6120783.html" target="_blank" rel="external">http://www.cnblogs.com/ccorz/p/6120783.html</a></p>
</blockquote>
<pre><code>type(name, bases, dict)
       返回一个新的type对象. 基本上是 class 语句的动态形式. 参数:
      name  , 字符串, 制定要构造类的名字, 赋给新对象的 __name__ 属性;
      bases，一个tuple，指定新类型的所有基类，赋给新对象的__bases__ 属性; 
      dict， 字典类型，作为新类的名字空间，赋给新对象的__dict__ 属性
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 用type()函数创建Hello类</span></div><div class="line"></div><div class="line"><span class="comment"># 1.定义一个函数。即：类的方法</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">say</span><span class="params">(self)</span>:</span></div><div class="line">    print(<span class="string">'Hello, World 2!'</span>)</div><div class="line"></div><div class="line"><span class="comment"># 2.创建一个class Hello2。type()函数中传入的参数：</span></div><div class="line"><span class="comment"># 1）class类名，2）继承的父类集合，3）class的方法名与函数的绑定，此处即：将函数say()绑定至方法名hello上</span></div><div class="line"><span class="comment"># 其实class定义一个类主要也是这3个主要组成部分：类名、继承类、方法</span></div><div class="line"><span class="comment"># Hello2是一个以名为"Hello22"的类的引用。这个名为"Hello22"的类以object为基类,类中有一个say()函数</span></div><div class="line">Hello2 = type(<span class="string">'Hello22'</span>, (object,), dict(say=say))</div><div class="line"></div><div class="line"><span class="comment"># 3.为类绑定一个变量</span></div><div class="line">Hello2.name = <span class="string">'cwj'</span></div><div class="line"></div><div class="line"><span class="comment"># 测试</span></div><div class="line">h2 = Hello2()</div><div class="line">print(h2.say())  <span class="comment"># Hello, World 2!</span></div><div class="line">print(h2.name)  <span class="comment"># cwj</span></div></pre></td></tr></table></figure>
<h4 id="3-metaclass"><a href="#3-metaclass" class="headerlink" title="3.metaclass"></a>3.<code>metaclass</code></h4><p>使用metaclass来控制类的创建行为</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/10/23/Python3  11-面向对象+枚举/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="YannisCheng">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/header.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="YannisCheng's Technology Blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/10/23/Python3  11-面向对象+枚举/" itemprop="url">未命名</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-10-23T23:51:37+08:00">
                2017-10-23
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2017-10-24T09:54:59+08:00">
                2017-10-24
              </time>
            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  191 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  1 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>#Python3  11-面向对象+枚举</p>
<blockquote>
<p>2017年07月19日11:14:05<br><code>Python</code>中<code>Enum</code>枚举的实现：<a href="http://www.cnblogs.com/codingmylife/archive/2013/05/31/3110656.html" target="_blank" rel="external">http://www.cnblogs.com/codingmylife/archive/2013/05/31/3110656.html</a></p>
</blockquote>
<p>定义常量的一般方法：定义变量<br>推荐的方法为：将枚举类型定义一个<code>class</code>类型。每个常量都是<code>class</code>的唯一实例<br>python提供了Enum来实现枚举功能</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 实现方式1</span></div><div class="line"><span class="keyword">from</span> enum <span class="keyword">import</span> Enum</div><div class="line"></div><div class="line">Week = Enum(<span class="string">'WeekInfo'</span>, (<span class="string">'Mon'</span>, <span class="string">'Tue'</span>, <span class="string">'Wed'</span>, <span class="string">'Thu'</span>, <span class="string">'Fri'</span>, <span class="string">'Sat'</span>, <span class="string">'Sun'</span>))</div><div class="line"></div><div class="line"><span class="comment"># 实现方式2</span></div><div class="line"><span class="keyword">from</span> enum <span class="keyword">import</span> Enum, unique</div><div class="line"></div><div class="line"><span class="comment"># @unique装饰器检查保证没有重复值</span></div><div class="line"><span class="meta">@unique</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyEnum02</span><span class="params">(Enum)</span>:</span></div><div class="line">    Sun = <span class="number">0</span></div><div class="line">    Mon = <span class="number">1</span></div><div class="line">    Tue = <span class="number">2</span></div><div class="line">    Wed = <span class="number">3</span></div><div class="line">    Thu = <span class="number">4</span></div><div class="line">    Fri = <span class="number">5</span></div><div class="line">    Sta = <span class="number">6</span></div><div class="line"></div><div class="line"><span class="comment"># 遍历Enum</span></div><div class="line"><span class="keyword">for</span> name, value <span class="keyword">in</span> Week.__members__.items():</div><div class="line">    print(name, value, m.value)</div><div class="line"></div><div class="line">print(Week.Mon.value)  <span class="comment"># 1</span></div><div class="line"></div><div class="line"><span class="string">"""</span></div><div class="line"><span class="string">Mon WeekInfo.Mon 1</span></div><div class="line"><span class="string">Tue WeekInfo.Tue 2</span></div><div class="line"><span class="string">Wed WeekInfo.Wed 3</span></div><div class="line"><span class="string">Thu WeekInfo.Thu 4</span></div><div class="line"><span class="string">Fri WeekInfo.Fri 5</span></div><div class="line"><span class="string">Sat WeekInfo.Sat 6</span></div><div class="line"><span class="string">Sun WeekInfo.Sun 7</span></div><div class="line"><span class="string">"""</span></div><div class="line"></div><div class="line"><span class="comment"># 使用MyEnum02</span></div><div class="line">print(MyEnum02(<span class="number">1</span>))  <span class="comment"># MyEnum02.Mon</span></div></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/10/23/Python3  10-面向对象+定制对象/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="YannisCheng">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/header.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="YannisCheng's Technology Blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/10/23/Python3  10-面向对象+定制对象/" itemprop="url">未命名</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-10-23T23:51:37+08:00">
                2017-10-23
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2017-10-24T09:54:55+08:00">
                2017-10-24
              </time>
            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  2,478 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  11 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>#Python3  10-面向对象+定制对象</p>
<blockquote>
<p>2017年07月18日09:10:55</p>
</blockquote>
<pre><code>在编写一个基础类的基础上，为其重写某些魔法方法。
</code></pre><blockquote>
<p>python其他内置魔法方法： <a href="https://docs.python.org/3/reference/datamodel.html#special-method-names" target="_blank" rel="external">https://docs.python.org/3/reference/datamodel.html#special-method-names</a><br><a href="http://www.cnblogs.com/simayixin/archive/2011/05/04/2036295.html" target="_blank" rel="external">http://www.cnblogs.com/simayixin/archive/2011/05/04/2036295.html</a><br>python常用魔法方法的实现：<a href="http://www.cnblogs.com/scolia/p/5690210.html" target="_blank" rel="external">http://www.cnblogs.com/scolia/p/5690210.html</a></p>
</blockquote>
<p><strong>魔法方法有：</strong><br>-1.<code>__new__()</code>：对象的创建，是一个静态方法，第一个参数是<code>cls</code>。(不可能是<code>self</code>，因为对象还没创建，哪来的<code>self</code>)—提示<code>单例模式</code>与此有关。<br>0.<code>__init__()</code>：对象的初始化， 是一个实例方法，第一个参数是<code>self</code>。<br>1.<code>__slots__()</code>：约束要绑定的临时变量<br>2.<code>__len__()</code>：让类作用于len()<br>3.<code>__str__()</code>：类似于<code>java</code>中的toString()，返回用户看到的字符串<br>4.<code>__repe__()</code>：返回开发者看到的字符串<br>5.<code>__iter__()</code>：将一个类被用于<code>for...in</code>循环中，返回一个迭代对象<br>6.<code>__getitem__()</code>：像<code>list</code>那样按照下标取出元素，要在其中处理<code>slice切片</code>、<code>step步长</code><br>7.<code>__getattr__()</code>：当调用不存在的属性时，<code>Python</code>解释器会试图调用<code>__getattr__(self, &#39;attr&#39;)</code>来尝试获得属性。只有在没有找到属性的情况下，才调用<code>__getattr__</code>，已有的属性将不会在<code>__getattr__</code>中查找。而且，实际上可以把一个类的所有属性和方法调用全部动态化处理了，不需要任何特殊手段。<br>8.<code>__call__()</code></p>
<h4 id="1-iter-配合-next-使用"><a href="#1-iter-配合-next-使用" class="headerlink" title="1.__iter__() 配合 __next__()使用"></a>1.<code>__iter__()</code> 配合 <code>__next__()</code>使用</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span><span class="params">(object)</span>:</span></div><div class="line"></div><div class="line">    <span class="comment"># 构造方法</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name)</span>:</span></div><div class="line">        self._name = name</div><div class="line">        self.a, self.sum = <span class="number">1</span>, <span class="number">0</span></div><div class="line"></div><div class="line">    <span class="comment"># 使本类可以迭代</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__iter__</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> self</div><div class="line"></div><div class="line">    <span class="comment"># 具体的迭代方法，此方法的实现是关键</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__next__</span><span class="params">(self)</span>:</span></div><div class="line">        self.sum = self.sum + self.a</div><div class="line">        <span class="keyword">if</span> self.sum &gt; <span class="number">10</span>:</div><div class="line">            <span class="keyword">raise</span> StopIteration</div><div class="line">        <span class="keyword">return</span> self.sum</div><div class="line"></div><div class="line">    <span class="comment"># 重写 toString()方法</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> <span class="string">'Person name is '</span> + self._name</div><div class="line"></div><div class="line">    __repr__ = __str__</div><div class="line"></div><div class="line">    <span class="string">'''测试'''</span></div><div class="line">person = Person(<span class="string">"cwj"</span>)</div><div class="line"></div><div class="line"><span class="comment"># 重写 __str__() 之后的效果</span></div><div class="line">print(Person(<span class="string">"cwj"</span>))  <span class="comment"># Person name is cwj</span></div><div class="line">print(person)  <span class="comment"># Person name is cwj</span></div><div class="line"></div><div class="line">print(isinstance(person, Iterator))  <span class="comment"># True</span></div><div class="line">print(isinstance(person, Iterable))  <span class="comment"># True</span></div><div class="line">l = []</div><div class="line"></div><div class="line"><span class="comment"># 遍历Person序列，此时Person是一个Iterator</span></div><div class="line"><span class="keyword">for</span> n <span class="keyword">in</span> person:</div><div class="line">    l.append(n)</div><div class="line">    print(n)</div><div class="line"></div><div class="line"><span class="comment"># 将一个类遍历后得到的结果赋值给l序列</span></div><div class="line">print(l)  <span class="comment"># [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]</span></div><div class="line"><span class="string">'''</span></div><div class="line"><span class="string">1</span></div><div class="line"><span class="string">2</span></div><div class="line"><span class="string">3</span></div><div class="line"><span class="string">4</span></div><div class="line"><span class="string">5</span></div><div class="line"><span class="string">6</span></div><div class="line"><span class="string">7</span></div><div class="line"><span class="string">8</span></div><div class="line"><span class="string">9</span></div><div class="line"><span class="string">10</span></div><div class="line"><span class="string">'''</span></div></pre></td></tr></table></figure>
<h4 id="2-getitme-配合-setitme-使用"><a href="#2-getitme-配合-setitme-使用" class="headerlink" title="2.__getitme__()配合__setitme__()使用"></a>2.<code>__getitme__()</code>配合<code>__setitme__()</code>使用</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">DictDemo</span><span class="params">(object)</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></div><div class="line">        self.dict = &#123;&#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getitem__</span><span class="params">(self, item)</span>:</span></div><div class="line">        <span class="keyword">if</span> item <span class="keyword">in</span> self.dict:</div><div class="line">            <span class="keyword">return</span> self.dict[item]</div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            <span class="keyword">return</span> <span class="string">'不存在'</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__setitem__</span><span class="params">(self, key, value)</span>:</span></div><div class="line">        self.dict[key] = value</div><div class="line"></div><div class="line">    <span class="string">'''测试'''</span></div><div class="line">dictD = DictDemo()</div><div class="line">dictD[<span class="string">'1'</span>] = <span class="string">'cwj'</span></div><div class="line">dictD.__setitem__(<span class="string">'1'</span>,<span class="string">'234'</span>)</div><div class="line">print(dictD.__getitem__(<span class="string">'1'</span>))  <span class="comment"># 234</span></div><div class="line">print(dictD[<span class="string">'2'</span>])  <span class="comment"># 不存在</span></div></pre></td></tr></table></figure>
<p><strong><em>一个实现<code>迭代</code>、<code>容器</code>的例子</em></strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div></pre></td><td class="code"><pre><div class="line"><span class="string">'''Animal类 自定义魔法函数'''</span></div><div class="line"><span class="keyword">from</span> pip._vendor.requests.packages.urllib3.connectionpool <span class="keyword">import</span> xrange</div><div class="line"></div><div class="line"><span class="string">'''</span></div><div class="line"><span class="string">创建一个模拟字典的类，这个类的内部维护了两个列表，</span></div><div class="line"><span class="string">key 负责储存键，value 负责储存值，两个列表通过索引的一一对应，从而达到模拟字典的目的</span></div><div class="line"><span class="string">'''</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span><span class="params">(object)</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, key, value)</span>:</span></div><div class="line">        self.key = []</div><div class="line">        self.value = []</div><div class="line">        self.key.append(key)</div><div class="line">        self.value.append(value)</div><div class="line">        self.__index = <span class="number">0</span></div><div class="line"></div><div class="line">    <span class="comment"># __len__方法，按照协议，这个方法应该返回容器的长度</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__len__</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> len(self.key)</div><div class="line"></div><div class="line">    <span class="comment"># __getitem__方法。这个方法会在a['scolia']时，调用a.__getitem__('scolia')。</span></div><div class="line">    <span class="comment"># 也就是说这个方法定义了元素的获取.</span></div><div class="line">    <span class="comment"># 先找到 key 列表中建的索引，然后用索引去 value 列表中找对应的元素，然后将其返回</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getitem__</span><span class="params">(self, item)</span>:</span></div><div class="line">        <span class="keyword">if</span> item <span class="keyword">in</span> self.key:</div><div class="line">            <span class="keyword">return</span> self.value[self.key.index(item)]</div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            <span class="keyword">return</span> <span class="string">'不存在'</span></div><div class="line"></div><div class="line">    <span class="comment"># __setitem__(self, key, value)方法定义了 a['scolia'] = 'good' 这种操作时的行为，</span></div><div class="line">    <span class="comment"># 此时将会调用a.__setitem__('scolia', 'good') 因为是绑定方法，所以self是自动传递的</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__setitem__</span><span class="params">(self, key, value)</span>:</span></div><div class="line">        <span class="keyword">if</span> key <span class="keyword">not</span> <span class="keyword">in</span> self.key:</div><div class="line">            self.key.append(key)</div><div class="line">            self.value.append(value)</div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            __index = self.key.index(key)</div><div class="line">            self.value[__index] = value</div><div class="line"></div><div class="line">    <span class="comment"># __delitem__(self, key)方法定义了del a['scolia'] 这类操作时候的行为，</span></div><div class="line">    <span class="comment"># 里面的‘scolia’就作为参数传进去</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__delitem__</span><span class="params">(self, key)</span>:</span></div><div class="line">        <span class="keyword">if</span> key <span class="keyword">in</span> self.key:</div><div class="line">            __index = self.key.index(key)</div><div class="line">            <span class="keyword">del</span> self.key[__index]</div><div class="line">            <span class="keyword">del</span> self.value[__index]</div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            <span class="keyword">return</span> <span class="string">"key值不存在"</span></div><div class="line"></div><div class="line">    <span class="string">'''只有实现里以上四个方法，就可以当做可变容器来使用了。'''</span></div><div class="line"></div><div class="line">    <span class="comment">#  __str__ 是对应于 str() 函数，在类的表示中会继续讨论，这里是为了 print 语句好看才加进去的，</span></div><div class="line">    <span class="comment"># 因为print语句默认就是调用str()函数</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></div><div class="line">        l = []</div><div class="line">        <span class="keyword">for</span> index <span class="keyword">in</span> xrange(len(self.key)):</div><div class="line">            __key = self.key[index]</div><div class="line">            __value = self.value[index]</div><div class="line">            result = __key,__value</div><div class="line">            l.append(result)</div><div class="line">        <span class="keyword">return</span> str(l)</div><div class="line"></div><div class="line">    <span class="comment"># 实现一个__iter__方法，这个方法负责返回一个迭代器</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__iter__</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> self</div><div class="line"></div><div class="line">    <span class="comment"># 内部实现了next（python3.x为__next__）方法，真正负责迭代的实现。</span></div><div class="line">    <span class="comment"># 当迭代器内的元素用尽之后，任何的进一步调用都之后触发 StopIteration 异常</span></div><div class="line">    <span class="comment"># 一般会在一个类里同时实现这两种方法（即是可迭代对象又是迭代器），此时__iter__方法只要返回self就足够的了</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__next__</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">if</span> self.__index == len(self.key):</div><div class="line">            self.__index = <span class="number">0</span></div><div class="line">            <span class="keyword">raise</span> StopIteration()</div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            __key = self.key[self.__index]</div><div class="line">            __value = self.value[self.__index]</div><div class="line">            result = __key, __value</div><div class="line">            self.__index += <span class="number">1</span></div><div class="line">            <span class="keyword">return</span> result</div><div class="line"></div><div class="line">    <span class="comment"># __contains__实现了成员判断，这里我们更关心value列表中的数据，所以判断的是value列表。</span></div><div class="line">    <span class="comment"># 该方法要求返回布尔值。</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__contains__</span><span class="params">(self, item)</span>:</span></div><div class="line">        <span class="keyword">if</span> item <span class="keyword">in</span> self.value:</div><div class="line">            <span class="keyword">return</span> <span class="keyword">True</span></div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            <span class="keyword">return</span> <span class="keyword">False</span></div><div class="line"></div><div class="line">    <span class="comment"># __reversed__(self)方法返回一个倒序后的副本，这里体现了有序性</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__reversed__</span><span class="params">(self)</span>:</span></div><div class="line">        __result = self.value</div><div class="line">        __result.reverse()</div><div class="line">        <span class="keyword">return</span> __result</div><div class="line"></div><div class="line"><span class="string">'''实际测试'''</span></div><div class="line">m = Animal(<span class="string">'1'</span>, <span class="string">'cwj'</span>)</div><div class="line">print(m)  <span class="comment"># [('1', 'cwj')]</span></div><div class="line">print(m.__len__())  <span class="comment"># 1</span></div><div class="line">m[<span class="string">'2'</span>] = <span class="string">'ddd'</span></div><div class="line">m[<span class="string">'3'</span>] = <span class="string">'qwe'</span></div><div class="line">m[<span class="string">'2'</span>] = <span class="string">'lkj'</span></div><div class="line"></div><div class="line">print(m)  <span class="comment"># [('1', 'cwj'), ('2', 'lkj'), ('3', 'qwe')]</span></div><div class="line">print(m.__len__())  <span class="comment"># 3</span></div><div class="line"></div><div class="line"><span class="keyword">del</span> m[<span class="string">'3'</span>]</div><div class="line"></div><div class="line">print(m)  <span class="comment"># [('1', 'cwj'), ('2', 'lkj')]</span></div><div class="line">print(m.__len__())  <span class="comment"># 2</span></div><div class="line"></div><div class="line">print(reversed(m))  <span class="comment"># ['lkj', 'cwj']</span></div><div class="line"></div><div class="line">print(<span class="string">'cwj'</span> <span class="keyword">in</span> m)  <span class="comment"># True</span></div></pre></td></tr></table></figure>
<h4 id="3-类的切片操作"><a href="#3-类的切片操作" class="headerlink" title="3.类的切片操作"></a>3.类的<code>切片</code>操作</h4><blockquote>
<p>参考：<a href="http://www.cnblogs.com/scolia/p/5690210.html" target="_blank" rel="external">http://www.cnblogs.com/scolia/p/5690210.html</a></p>
</blockquote>
<p>代码示例</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Slices</span><span class="params">(object)</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, x)</span>:</span></div><div class="line">        self._x = x</div><div class="line">        self._index = <span class="number">-1</span></div><div class="line"></div><div class="line">    <span class="string">'''</span></div><div class="line"><span class="string">    # __getitem__()实现支持for循环</span></div><div class="line"><span class="string">    def __getitem__(self, item):</span></div><div class="line"><span class="string">        if isinstance(self._x, list):</span></div><div class="line"><span class="string">            self._index += 1</span></div><div class="line"><span class="string">            return self._x[self._index]</span></div><div class="line"><span class="string">        else:</span></div><div class="line"><span class="string">            raise '参数类型错误'</span></div><div class="line"><span class="string">     '''</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getitem__</span><span class="params">(self, item)</span>:</span></div><div class="line"></div><div class="line">        <span class="comment"># print(item.start, item.stop, item.step)  # 1 2 1</span></div><div class="line">        <span class="comment"># return item   # slice(1, 2, 1)</span></div><div class="line">        <span class="keyword">if</span> isinstance(item, slice):</div><div class="line">            <span class="keyword">return</span> self._x[item.start:item.stop:item.step]</div><div class="line"></div><div class="line"><span class="string">'''测试Slices类'''</span></div><div class="line"><span class="string">'''</span></div><div class="line"><span class="string">s = Slices([1, 2, 3, 4])</span></div><div class="line"><span class="string">for n in s:</span></div><div class="line"><span class="string">    print(n)</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">'''</span></div><div class="line"><span class="number">1</span></div><div class="line"><span class="number">2</span></div><div class="line"><span class="number">3</span></div><div class="line"><span class="number">4</span></div><div class="line"><span class="string">'''</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">s2 = Slices('1234')</span></div><div class="line"><span class="string">for n in s2:</span></div><div class="line"><span class="string">    print(n)</span></div><div class="line"><span class="string">'''</span></div><div class="line"></div><div class="line">s3 = Slices([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>])</div><div class="line"></div><div class="line"><span class="comment"># 当直接返回item参数时的结果</span></div><div class="line"><span class="comment"># print(s3[1:4:1])  # slice(1, 2, 1)</span></div><div class="line">print(s3[<span class="number">1</span>:<span class="number">4</span>:<span class="number">1</span>])  <span class="comment"># [2, 3, 4]</span></div><div class="line">print(s3[<span class="number">-4</span>:<span class="number">-2</span>])  <span class="comment"># [2, 3]</span></div><div class="line">print(s3[<span class="number">-3</span>:<span class="number">-1</span>])  <span class="comment"># [3, 4]</span></div><div class="line">print(s3[<span class="number">-5</span>:])  <span class="comment"># [1, 2, 3, 4, 5]</span></div><div class="line">print(s3[:])  <span class="comment"># [1, 2, 3, 4, 5]</span></div><div class="line">print(s3[<span class="number">-1</span>::<span class="number">-1</span>])  <span class="comment"># [5, 4, 3, 2, 1]</span></div><div class="line">print(s3[<span class="number">-1</span>:])  <span class="comment"># [5]</span></div></pre></td></tr></table></figure>
<h4 id="4-getattr"><a href="#4-getattr" class="headerlink" title="4.__getattr__()"></a>4.<code>__getattr__()</code></h4><p>正常情况下，当我们调用类的<code>方法</code>或<code>属性</code>时，如果不存在，就会报错。如：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">AttributeError: <span class="string">'Student'</span> object has no attribute <span class="string">'score'</span></div></pre></td></tr></table></figure></p>
<p>要避免这个错误，<code>Python</code>有一个机制：写一个<code>__getattr__()</code>方法，动态返回一个属性。<br>当调用不存在的属性时，比如<code>color</code>，<code>Python</code>解释器会试图调用<code>__getattr__(self, &#39;color&#39;)</code>来尝试获得属性，这样我们就有机会返回<code>color</code>的值</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 返回不存在的属性与函数</span></div><div class="line"><span class="comment"># 作用：可以针对完全动态的情况作调用</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">__getattr__</span><span class="params">(self, item)</span>:</span></div><div class="line">    <span class="comment"># 返回未定义的属性</span></div><div class="line">    <span class="keyword">if</span> item == <span class="string">'color'</span>:</div><div class="line">        <span class="keyword">return</span> <span class="string">'您真是 666 啊 ~ 这个属性都鞥猜到'</span></div><div class="line">    <span class="keyword">elif</span> item == <span class="string">'address'</span>:</div><div class="line">        <span class="keyword">return</span> <span class="string">'哈哈哈'</span></div><div class="line">    <span class="comment"># 返回未定义的函数</span></div><div class="line">    <span class="keyword">elif</span> item == <span class="string">'add'</span>:</div><div class="line">        <span class="keyword">return</span> <span class="keyword">lambda</span>: <span class="number">100</span></div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        <span class="comment"># 注意到任意调用如s.abc都会返回None，这是因为我们定义的__getattr__默认返回就是None</span></div><div class="line">        <span class="comment"># 要让class只响应特定的几个属性,要按照约定，抛出AttributeError错误</span></div><div class="line">        <span class="keyword">raise</span> AttributeError(<span class="string">'\'Student\' object has no attribute \'%s\''</span> % item)</div></pre></td></tr></table></figure>
<h4 id="5-call-与-getattr-组合实现URL中的链式-chain-调用"><a href="#5-call-与-getattr-组合实现URL中的链式-chain-调用" class="headerlink" title="5.__call__()与__getattr__()组合实现URL中的链式(chain)调用"></a>5.<code>__call__()</code>与<code>__getattr__()</code>组合实现<code>URL</code>中的链式(chain)调用</h4><p>在python中，函数其实是一个对象。如：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>f = abs</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>f.__name__</div><div class="line"><span class="string">'abs'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>f(<span class="number">-123</span>)</div><div class="line"><span class="number">123</span></div></pre></td></tr></table></figure>
<p>由于 f 可以被调用，所以，f 被称为可调用对象。所有的函数都是可调用对象。<br>一个类的实例对象想要变成一个可调用的对象，只需要实现一个魔法方法<code>__call__()</code>。</p>
<p><strong><code>可调用对象</code>与<code>一般对象</code></strong></p>
<ul>
<li>可调用对象：obj.name(‘source’).age。即：既可以使用<code>.</code>调用属性或方法，也可以使用<code>obj()</code>以一种<code>函数样式</code>使用此对象。此时调用<code>obj(arg1,arg2,....)</code>就等价于<code>obj.__call__(self,arg1,arg2,...)</code></li>
<li>一般对象：obj.name。即：只能使用<code>.</code>调用属性或方法。</li>
</ul>
<p>因为<code>__call__()</code>魔法方法的加入，因此<code>python</code>的<code>函数</code>与<code>对象</code>之间的概念被模糊了</p>
<p>URL中的链式调用，这样无论API怎么变，SDK都可以根据URL实现完全动态的调用，而且，不随API的增加而改变，代码示例：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"><span class="string">'''URLChain类'''</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">URLChain</span><span class="params">(object)</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, path = <span class="string">''</span>)</span>:</span></div><div class="line">        self.__path = path</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getattr__</span><span class="params">(self, item)</span>:</span></div><div class="line">        <span class="comment"># 实现参考：https://zhidao.baidu.com/question/1865282935722979707.html</span></div><div class="line">        <span class="comment"># 返回一个 URLChain 对象，这个时候里面的path就是''+'/'+'api'='/api'，此时self = /api</span></div><div class="line">        print(<span class="string">'\'self.__path is\' :'</span> + self.__path + <span class="string">'       , \'item is\' : '</span> + item + <span class="string">' ， 之前self为：'</span>, self)</div><div class="line">        <span class="comment"># 即：上一个 '%s/%s' 的数值代替：构造函数中 path = ''中 '' 的具体数值，相当于重新构造了一个对象，</span></div><div class="line">        <span class="comment"># 在即将的调用的返回值中表示参数self.__path的值, 新传入的参数赋值给item</span></div><div class="line">        <span class="keyword">return</span> URLChain(<span class="string">'%s/%s'</span> % (self.__path, item))</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> self.__path</div><div class="line"></div><div class="line">    __repr__ = __str__</div><div class="line"></div><div class="line">    <span class="comment"># 将此类的实例对象变成一个可调用的对象</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__call__</span><span class="params">(self, path)</span>:</span></div><div class="line">        print(<span class="string">'__call__  之前self is : '</span>, self)</div><div class="line">        print(<span class="string">'__call__ path is : '</span> + path)</div><div class="line">        <span class="keyword">return</span> URLChain(<span class="string">'%s/%s'</span> % (self.__path, path))</div><div class="line"></div><div class="line"><span class="string">'''调用URLChian类'''</span></div><div class="line">chain = URLChain()</div><div class="line">print(chain.api.server.user.friends)</div><div class="line"><span class="string">'''</span></div><div class="line"><span class="string">'self.__path is' :       , 'item is' : api ， 之前self为： </span></div><div class="line"><span class="string">'self.__path is' :/api       , 'item is' : server ， 之前self为： /api</span></div><div class="line"><span class="string">'self.__path is' :/api/server       , 'item is' : user ， 之前self为： /api/server</span></div><div class="line"><span class="string">'self.__path is' :/api/server/user       , 'item is' : friends ， 之前self为： /api/server/user</span></div><div class="line"><span class="string">/api/server/user/friends</span></div><div class="line"><span class="string">'''</span></div><div class="line"><span class="comment"># 当执行 ('cwj') 这一个参数时调用的是 URLChian的 __call__()</span></div><div class="line">print(chain.api.server(<span class="string">'cwj'</span>).friends)</div><div class="line"><span class="string">'''</span></div><div class="line"><span class="string">'self.__path is' :       , 'item is' : api ， 之前self为： </span></div><div class="line"><span class="string">'self.__path is' :/api       , 'item is' : server ， 之前self为： /api</span></div><div class="line"><span class="string">__call__  之前self is :  /api/server</span></div><div class="line"><span class="string">__call__ path is : cwj</span></div><div class="line"><span class="string">'self.__path is' :/api/server/cwj       , 'item is' : friends ， 之前self为： /api/server/cwj</span></div><div class="line"><span class="string">/api/server/cwj/friends</span></div><div class="line"><span class="string">'''</span></div></pre></td></tr></table></figure></p>
<h4 id="6-callable-的使用：判断一个变量是函数还是对象"><a href="#6-callable-的使用：判断一个变量是函数还是对象" class="headerlink" title="6.callable()的使用：判断一个变量是函数还是对象"></a>6.callable()的使用：判断一个变量是<code>函数</code>还是<code>对象</code></h4><p>代码示例<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 判断一个对象是否能被调用，能被调用的对象就是一个Callable对象,函数和自定义的带有__call__()的类实例对象返回值是True：</span></div><div class="line">print(callable(chain))  <span class="comment"># True URLChian实现了__call__()魔法方法</span></div><div class="line">print(callable(dictD))  <span class="comment"># False</span></div><div class="line">print(callable(abs))  <span class="comment"># True</span></div></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/10/23/Python3  09-面向对象/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="YannisCheng">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/header.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="YannisCheng's Technology Blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/10/23/Python3  09-面向对象/" itemprop="url">未命名</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-10-23T23:51:37+08:00">
                2017-10-23
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2017-10-24T09:54:47+08:00">
                2017-10-24
              </time>
            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  2,145 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  9 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>#Python3  09-面向对象</p>
<blockquote>
<p>2017年07月17日09:15:56</p>
</blockquote>
<p>####类的模板</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="string">'''类模板'''</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span><span class="params">(object)</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name, age, city)</span>:</span></div><div class="line">        self.name = name</div><div class="line">        self.age = age</div><div class="line">        self.__city = city</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">print_info</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">'self is : '</span>, self) <span class="comment"># self is :  &lt;py_class.Student.Student object at 0x10c92c400&gt;</span></div><div class="line">        <span class="comment"># print(student) 得到的结果为：&lt;py_class.Student.Student object at 0x10c92c400&gt;</span></div><div class="line">        print(<span class="string">'class is : '</span>, self.__class__)  <span class="comment"># class is :  &lt;class 'py_class.Student.Student'&gt;</span></div><div class="line">        print(<span class="string">'%s, %d, %s'</span> % (self.name, self.age, self.__city))</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_age</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">if</span> self.age == <span class="number">20</span>:</div><div class="line">            print(<span class="string">'age is '</span>, self.age)</div><div class="line">        <span class="keyword">elif</span> self.age &gt; <span class="number">20</span>:</div><div class="line">            print(<span class="string">'too old'</span>)</div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            print(<span class="string">'too young'</span>)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_city</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> self.__city</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">set_city</span><span class="params">(self, city)</span>:</span></div><div class="line">        self.__city = city</div></pre></td></tr></table></figure>
<p>####属性</p>
<p> 1.类属性：像是Student类中的name就是类属性<br> 2.实例属性：像是下文中的student.__city就是实例属性</p>
<p>####类中变量及函数的命名规范</p>
<ul>
<li>以<code>__</code>开始，并以<code>__</code> 双下划线 结束的是python中的特殊变量，特殊变量是可以直接访问的，不是<code>private</code>变量</li>
<li><code>class</code>后面紧接着是类名，即Student，类名通常是大写开头的单词，紧接着是<code>(object)</code>，表示该类是从哪个类继承下来的.通常，如果没有合适的继承类，就使用<code>object</code>类，这是所有类最终都会继承的类</li>
<li><code>__init__</code>方法的第一个参数永远是<code>self</code>，表示创建的实例本身，因此，在<code>__init__</code>方法内部，就可以把各种属性绑定到<code>self</code>，因为<code>self</code>就指向创建的实例本身。</li>
<li>有了<code>__init__</code>方法，在创建实例的时候，就不能传入空的参数了，必须传入与<code>__init__</code>方法匹配的参数，但<code>self</code>不需要传，<code>Python</code>解释器自己会把实例变量传进去</li>
<li>在类中定义的函数只有一点不同，就是第一个参数永远是实例变量<code>self</code>，并且，调用时，不用传递该参数。</li>
<li><p><code>self</code>指向的类的实力对象。由：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">print(<span class="string">'self is : '</span>, self) <span class="comment"># self is :  &lt;py_class.Student.Student object at 0x10c92c400&gt;</span></div><div class="line">print(student)  <span class="comment"># &lt;py_class.Student.Student object at 0x10c92c400&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<p>可以看出，<code>self</code>和<code>student</code>的 <em>内存地址</em> 是一样的。</p>
<p>代码示例</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="string">'''调用'''</span></div><div class="line"><span class="comment"># 创建实例对象</span></div><div class="line">student = Student(<span class="string">'cwj'</span>,<span class="number">24</span>, <span class="string">'tianjin'</span>)</div><div class="line">student.print_info()  <span class="comment"># cwj, 24, tianjin</span></div><div class="line">student.get_age()  <span class="comment"># too old</span></div><div class="line"></div><div class="line"><span class="comment"># 访问属性</span></div><div class="line">student.age = <span class="number">19</span></div><div class="line">student.name = <span class="string">'ddd'</span></div></pre></td></tr></table></figure>
<p>####访问限制</p>
<pre><code>虽然有访问限制的命名方式，但是Python本身没有任何机制阻止你干坏事，一切全靠自觉。
</code></pre><ul>
<li><p>两个下划线开头的变量，声明为类内部的私有变量，不能在类的外部直接使用或访问：在变量前面添加<code>__</code>，即：<code>__name</code>。在类内部的方法中使用时 <code>self.__private_attrs</code>。</p>
</li>
<li><p>两个下划线开头的方法，声明为类内部的私有方法。不能在类地外部调用，在类的内部调用 <code>self.__private_methods</code>.</p>
</li>
<li>单下划线开头表示的<code>protected</code>类型的变量，只允许本身及其子类进行访问。</li>
<li></li>
<li>类的方法<br>在类的内部，使用 <code>def</code> 关键字可以为类定义一个方法，与一般函数定义不同，类方法必须包含参数 <code>self</code>,且为第一个参数</li>
</ul>
<p>代码示例</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">    <span class="comment"># 此行代码貌似修改了 Student 类中的 __city 属性,实际这是为student添加了一个属性。</span></div><div class="line">    student.__city = <span class="string">'beijing'</span></div><div class="line">    <span class="comment"># 而且输出结果也显示；__city 属性 的值也变成了：beijing</span></div><div class="line">    print(student.__city)  <span class="comment"># beijing</span></div><div class="line">    <span class="comment"># 但是，当我们通过类自身的get()获取属性值时，发现还是之前初始化时的属性值。即：tianjin</span></div><div class="line">    print(student.get_city())  <span class="comment"># tianjin</span></div><div class="line"></div><div class="line">    print(hasattr(student, <span class="string">'name'</span>))  <span class="comment"># True</span></div><div class="line"></div><div class="line">    <span class="comment"># 删除临时添加的 __city 属性</span></div><div class="line">    <span class="comment"># del student.__city</span></div><div class="line"><span class="comment"># print(student.__city)  # AttributeError: 'Student' object has no attribute '__city'</span></div><div class="line"></div><div class="line">    <span class="comment"># 当我们通过类自身的set()方法修改 __city 属性值时，通过get()得到的属性值是修改之后的。</span></div><div class="line">    student.set_city(<span class="string">'hk'</span>)</div><div class="line">    print(student.get_city())  <span class="comment"># hk</span></div><div class="line"></div><div class="line">    <span class="comment"># 由此可以得出：此时的 student.__city 与 student.set_city() 中的 __city 并不是同一个属性</span></div><div class="line">    <span class="comment"># student.__city 中的 __city 是student的一个新的同名属性</span></div><div class="line"></div><div class="line">    student.print_info()  <span class="comment"># ddd, 19, hk</span></div></pre></td></tr></table></figure>
<p>####Python内置类属性</p>
<ul>
<li><code>__dict__</code> : 类的属性（包含一个字典，由类的数据属性组成）</li>
<li><code>__doc__</code> :类的文档字符串，即：注释</li>
<li><code>__name__</code>: 类名</li>
<li><code>__module__</code>: 类定义所在的模块（类的全名是<code>__main__.className</code>，如果类位于一个导入模块mymod中，那么<code>className.__module__</code> 等于 mymod）</li>
<li><code>__bases__</code> : 类的所有父类构成元素（包含了一个由所有父类组成的元组）</li>
</ul>
<p>代码示例</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 由 类 进行调用 __dict__</span></div><div class="line">print(Student.__dict__)  <span class="comment"># &#123;'__module__': 'py_class.Student', '__init__': &lt;function Student.__init__ at 0x100ccf8c8&gt;, 'print_info': &lt;function Student.print_info at 0x100ccf950&gt;, 'get_age': &lt;function Student.get_age at 0x100ccf9d8&gt;, 'get_city': &lt;function Student.get_city at 0x100ccfa60&gt;, 'set_city': &lt;function Student.set_city at 0x100ccfae8&gt;, '__dict__': &lt;attribute '__dict__' of 'Student' objects&gt;, '__weakref__': &lt;attribute '__weakref__' of 'Student' objects&gt;, '__doc__': None&#125;</span></div><div class="line"></div><div class="line"><span class="comment"># 由 对象 调用 __dict__ 方法类似于：java中的toString()</span></div><div class="line">print(student.__dict__)  <span class="comment"># &#123;'name': 'ddd', 'age': 19, '_Student__city': 'hk', '__city': 'beijing'&#125;</span></div><div class="line"></div><div class="line">print(student.__doc__)  <span class="comment"># None</span></div><div class="line"></div><div class="line"><span class="comment"># 由 类 进行调用</span></div><div class="line">print(Student.__name__)  <span class="comment"># Student</span></div><div class="line"></div><div class="line">print(student.__module__)  <span class="comment"># py_class.Student</span></div><div class="line"></div><div class="line"><span class="comment"># 由 类 进行调用</span></div><div class="line">print(Student.__bases__)  <span class="comment"># (&lt;class 'object'&gt;,)</span></div></pre></td></tr></table></figure>
<p>####python对象的销毁</p>
<pre><code>垃圾回收 —— 引用计数 + 循环引用
</code></pre><ul>
<li>引用计数法。当跟踪变量对象的引用计数变为0时，它将会被回收。但不是立即被回收，而是由‘解释器’在适当的时机将其回收。</li>
<li>循环引用。当两个对象相互引用，但是没有其他的变量引用他们。此时循环垃圾回收器将会工作。</li>
</ul>
<p>代码示例</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">del</span> student.__city</div></pre></td></tr></table></figure>
<p>####继承</p>
<p><strong><em>支持多继承</em></strong><br><strong><em>父类的构造器<code>（__init__(self)）</code>不会被自动调用，需要在子类中亲自专门调用</em></strong><br><strong><em>python总是先在本类中查找调用的方法，找不到才会去父类中继续寻找</em></strong></p>
<p><strong>几个基础的重载方法</strong><br> 1.<code>__init__(self,[])</code> 构造方法<br> 2.<code>__del__(self)</code> 删除一个对象，dell obj<br> 3.<code>__repr__(self)</code> 转化为供解释器读取的形式<br> 4.<code>__str__(self)</code> 将值转化为始于人阅读的形式<br> 5.<code>__cmp__(self,x)</code> 对象比较</p>
<p> 代码示例</p>
<p><em>父类</em></p>
 <figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="string">'''父类 1 '''</span></div><div class="line"> <span class="class"><span class="keyword">class</span> <span class="title">Animal</span><span class="params">(object)</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name, age)</span>:</span></div><div class="line">        self.__name = name</div><div class="line">        self.__age = age</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_name</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> self.__name</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_age</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> self.__age</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">set_name</span><span class="params">(self, name)</span>:</span></div><div class="line">        self.__name = name</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">set_age</span><span class="params">(self, age)</span>:</span></div><div class="line">        self.__age = age</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">'Animal is running'</span>)</div><div class="line"></div><div class="line"> <span class="string">'''父类 2'''</span></div><div class="line"> <span class="class"><span class="keyword">class</span> <span class="title">Pet</span><span class="params">(object)</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">play</span><span class="params">(self)</span>:</span></div><div class="line">        print(self.__name + <span class="string">" is very good !"</span>)</div></pre></td></tr></table></figure>
<p><em>子类</em></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">from</span> py_class.Animal <span class="keyword">import</span> Animal</div><div class="line"><span class="keyword">from</span> py_class.Pet <span class="keyword">import</span> Pet</div><div class="line"></div><div class="line"><span class="comment"># 多继承</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Pig</span><span class="params">(Animal, Pet)</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name, age)</span>:</span></div><div class="line">        self.__name = name</div><div class="line">        self.__age = age</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">'pig is running very slowly...'</span>)</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">from</span> py_class.Animal <span class="keyword">import</span> Animal</div><div class="line"></div><div class="line"><span class="comment"># 单继承</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span><span class="params">(Animal)</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name, age)</span>:</span></div><div class="line">        self.__name = name</div><div class="line">        self.__age = age</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(self)</span>:</span></div><div class="line">        print(self.__name + <span class="string">' is running'</span>)</div><div class="line"></div><div class="line"><span class="keyword">from</span> py_class.Animal <span class="keyword">import</span> Animal</div><div class="line"></div><div class="line"><span class="comment"># 单继承</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span><span class="params">(Animal)</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name, age)</span>:</span></div><div class="line">        self.__name = name</div><div class="line">        self.__age = age</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(self)</span>:</span></div><div class="line">        print(self.__name + <span class="string">'is running'</span>)</div></pre></td></tr></table></figure>
<p><em>测试类</em></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> py_class.Animal <span class="keyword">import</span> Animal</div><div class="line"><span class="keyword">from</span> py_class.Dog <span class="keyword">import</span> Dog</div><div class="line"><span class="keyword">from</span> py_class.Cat <span class="keyword">import</span> Cat</div><div class="line"><span class="keyword">from</span> py_class.PIg <span class="keyword">import</span> Pig</div><div class="line"></div><div class="line">dog = Dog(<span class="string">'wangwang'</span>, <span class="number">1</span>)</div><div class="line">dog.run()</div><div class="line"></div><div class="line">cat = Cat(<span class="string">'miaomiao'</span>, <span class="number">1</span>)</div><div class="line">cat.run()</div><div class="line"></div><div class="line">pig = Pig(<span class="string">'big pig'</span>, <span class="number">100</span>)</div><div class="line">pig.run()  <span class="comment"># pig is running very slowly...</span></div><div class="line"><span class="comment"># pig.play()  # big pig is very good !</span></div><div class="line"></div><div class="line">print(isinstance(cat, Animal))  <span class="comment"># True</span></div><div class="line">print(isinstance(cat, Cat))  <span class="comment"># True</span></div><div class="line"><span class="string">'''由此可见，cat变量既是Cat类型，也是Animal类型'''</span></div></pre></td></tr></table></figure>
<p>####多态</p>
<p>代码示例</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="string">'''</span></div><div class="line"><span class="string">    多态的实现方式 1 类似于java这种静态语言的实现，必须传入Animal类型或其子类</span></div><div class="line"><span class="string">    </span></div><div class="line"><span class="string"># 多态的使用 将 父类 作为参数</span></div><div class="line"><span class="string">def run_test(animal):</span></div><div class="line"><span class="string">    animal.run()</span></div><div class="line"><span class="string">'''</span></div><div class="line"><span class="string">'''</span></div><div class="line"><span class="string">    多态的实现方式 2 属于python的动态语言实现'</span></div><div class="line"><span class="string">    这种方式实现的结果与 方式 1 完全一样</span></div><div class="line"><span class="string">    原理：</span></div><div class="line"><span class="string">        不一定要传入Animal类型，只要保证传入的对象一个run()方法就可以了.</span></div><div class="line"><span class="string">    例如：传递的对象为ints，这不是Animal的任何一个子类，只要将赋予run()方法就足以。</span></div><div class="line"><span class="string">    </span></div><div class="line"><span class="string">    动态语言的'鸭子类型'：</span></div><div class="line"><span class="string">        它并不要求严格的继承体系，一个对象只要"看起来像鸭子，走起路来像鸭子"，那么它就是鸭子。</span></div><div class="line"><span class="string">'''</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">run_test</span><span class="params">(ints)</span>:</span></div><div class="line">    ints.run()</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment"># 多态的使用 实际参数为具体的子类，得到的结果为各个子类的具体表现</span></div><div class="line">run_test(Animal(<span class="string">'Animal'</span>, <span class="number">1</span>))  <span class="comment"># Animal is running</span></div><div class="line">run_test(Dog(<span class="string">'Dog'</span>, <span class="number">1</span>))  <span class="comment"># Dog is running</span></div><div class="line">run_test(Cat(<span class="string">'Cat'</span>, <span class="number">1</span>))  <span class="comment"># Catis running</span></div><div class="line">run_test(Pig(<span class="string">'Cat'</span>, <span class="number">1</span>))  <span class="comment"># pig is running very slowly...</span></div></pre></td></tr></table></figure>
<p>####获取对象信息</p>
<ul>
<li><code>getattr(obj, name[, default])</code> : 访问对象的属性。</li>
<li><code>hasattr(obj,name)</code> : 检查是否存在一个属性。</li>
<li><code>setattr(obj,name,value)</code> : 设置一个属性。如果属性不存在，会创建一个新属性。</li>
<li><code>delattr(obj, name)</code> : 删除属性。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="string">'''isinstance() 查看一个变量的继承关系'''</span></div><div class="line">print(isinstance(cat, Animal))  <span class="comment"># True</span></div><div class="line">print(isinstance(cat, Cat))  <span class="comment"># True</span></div><div class="line">print(isinstance(pig, Animal))  <span class="comment"># True</span></div><div class="line">print(isinstance(pig, Pet))  <span class="comment"># True</span></div><div class="line">print(isinstance(pig, Pig))  <span class="comment"># True</span></div><div class="line"></div><div class="line"><span class="string">''' type()</span></div><div class="line"><span class="string">    当使用继承关系时，使用type()不能一直向上得到他们的父类，</span></div><div class="line"><span class="string">    因此，对于有 继承关系 的类来说不合适</span></div><div class="line"><span class="string">'''</span></div><div class="line"></div><div class="line">print(type(<span class="number">123</span>))  <span class="comment"># &lt;class 'int'&gt;</span></div><div class="line">print(type(dog))  <span class="comment"># &lt;class 'py_class.Dog.Dog'&gt;</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">compare</span><span class="params">(obj1, obj2)</span>:</span></div><div class="line">    <span class="keyword">if</span> type(obj1) == type(obj2):</div><div class="line">        print(type(obj1) == type(obj2))</div><div class="line">        print(str(obj1) + <span class="string">'=='</span> + str(obj2))</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        print(type(obj1) == type(obj2))  <span class="comment"># False</span></div><div class="line">        print(str(obj1) + <span class="string">'!='</span> + str(obj2))</div><div class="line"></div><div class="line">compare(dog, cat)</div><div class="line"></div><div class="line"><span class="string">'''获取一个对象所有的属性和方法'''</span></div><div class="line">print(dir(dog))</div><div class="line"><span class="comment"># ['_Dog__age', '_Dog__name', '__class__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__format__', '__ge__', '__getattribute__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__le__', '__lt__', '__module__', '__ne__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '__weakref__', 'get_age', 'get_name', 'run', 'set_age', 'set_name']</span></div></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/10/23/Python3  09-面向对象+临时变量、方法+@property+多继承/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="YannisCheng">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/header.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="YannisCheng's Technology Blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/10/23/Python3  09-面向对象+临时变量、方法+@property+多继承/" itemprop="url">未命名</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-10-23T23:51:37+08:00">
                2017-10-23
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2017-10-24T09:54:51+08:00">
                2017-10-24
              </time>
            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  1,019 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  4 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>#Python3  09-面向对象+临时变量、方法+@property+多继承</p>
<blockquote>
<p>2017年07月17日17:04:47</p>
</blockquote>
<p>###绑定临时变量和临时函数 – 不限定参数</p>
<pre><code>使用python语言`动态语言`这一特性。
</code></pre><ul>
<li><p>####绑定临时变量</p>
<ul>
<li><strong>为实例对象绑定临时变量</strong></li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 动态的将 new_name 属性绑定至 实例 中</span></div><div class="line">dog.new_name = <span class="string">'new cwj'</span></div><div class="line">print(dog.new_name)  <span class="comment"># new cwj</span></div><div class="line"></div><div class="line"><span class="comment"># 删除临时添加的 new_name 属性</span></div><div class="line"><span class="keyword">del</span> dog.new_name</div></pre></td></tr></table></figure>
<ul>
<li><strong>为类绑定临时变量</strong></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 动态的将 new_name_2 属性绑定至 Dog类 中</span></div><div class="line">Dog.new_name_2 = <span class="string">'new cwj 2'</span></div><div class="line">print(dog.new_name_2)  <span class="comment"># new cwj 2</span></div><div class="line">dog2 = Dog(<span class="string">'wangwang'</span>, <span class="number">1</span>)</div><div class="line">print(dog2.new_name_2)  <span class="comment"># new cwj 2</span></div><div class="line"><span class="string">'''</span></div><div class="line"><span class="string">可以看到 dog 与 dog2 两个实例都具有 new_name_2 属性，</span></div><div class="line"><span class="string">由此可见 new_name_2 属性已经动态的添加至Dog类中</span></div><div class="line"><span class="string">'''</span></div></pre></td></tr></table></figure>
<ul>
<li><p>####绑定临时函数</p>
<ul>
<li><strong>为实例对象绑定临时函数</strong></li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> types <span class="keyword">import</span> MethodType</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">set_color</span><span class="params">(self, color)</span>:</span></div><div class="line">    self.color = color</div><div class="line"></div><div class="line"><span class="comment"># 给实例绑定一个方法</span></div><div class="line">dog.set_color = MethodType(set_color, dog)</div><div class="line"></div><div class="line"><span class="comment"># 通过这个方法为临时的color赋值</span></div><div class="line">dog.set_color(<span class="string">'red'</span>)</div><div class="line"></div><div class="line"><span class="comment"># set_color()这个方法是临时赋给dog变量的，而不是赋给dog2的</span></div><div class="line"><span class="comment"># dog2.set_color('green')  # AttributeError: 'Dog' object has no attribute 'set_color'</span></div><div class="line"></div><div class="line"><span class="comment"># 输出临时参数color的值</span></div><div class="line">print(dog.color)  <span class="comment"># red</span></div><div class="line"></div><div class="line"><span class="comment"># 删除临时方法，删除此方法的同时，也删除了此方法内的历史变量</span></div><div class="line"><span class="keyword">del</span> dog.set_color</div><div class="line"></div><div class="line"><span class="comment"># 删除临时参数</span></div><div class="line"><span class="comment"># del dog.color</span></div><div class="line"></div><div class="line"><span class="comment"># 当删除临时方法后，此方法将不再能使用</span></div><div class="line"><span class="comment"># dog.set_color('green')  # AttributeError: 'Dog' object has no attribute 'set_color'</span></div></pre></td></tr></table></figure>
<ul>
<li><strong>为类绑定临时函数</strong></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 定义一个临时的方法</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">set_color2</span><span class="params">(self, color)</span>:</span></div><div class="line">    self.color = color</div><div class="line"></div><div class="line"><span class="comment"># 将临时定义的方法绑定给 Dog这个类</span></div><div class="line">Dog.set_color2 = set_color2</div><div class="line"></div><div class="line"><span class="comment"># Dog类的两个变量dog和dog2分别调用set_color2()</span></div><div class="line">dog.set_color2(<span class="string">'blue'</span>)</div><div class="line">dog2.set_color2(<span class="string">'black'</span>)</div><div class="line"></div><div class="line"><span class="comment"># 测试临时函数是否对临时变量赋值成功</span></div><div class="line">print(dog2.color)  <span class="comment"># black</span></div><div class="line">print(dog.color)  <span class="comment"># blue</span></div><div class="line"></div><div class="line"><span class="comment"># 删除临时的方法</span></div><div class="line"><span class="keyword">del</span> Dog.set_color2</div></pre></td></tr></table></figure>
<p>###绑定临时变量和临时函数 – 限定参数 <code>__slots__</code>变量</p>
<pre><code>`__slots__`定义的属性仅对当前类实例起作用，对继承的子类是不起作用的.
除非在子类中也定义`__slots__`，这样，子类实例允许定义的属性就是自身的`__slots__`加上父类的`__slots__`
</code></pre><p>代码示例</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="string">'''声明Pet类'''</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Pet</span><span class="params">(object)</span>:</span></div><div class="line"></div><div class="line">    <span class="string">'''</span></div><div class="line"><span class="string">        使用一个特殊的变量 __slots__，这个变量可以限制外部为Pet类添加的属性。</span></div><div class="line"><span class="string">        例如此处，只允许外部为Pet类添加 name 和 age 两个属性</span></div><div class="line"><span class="string">    '''</span></div><div class="line">    __slots__ = (<span class="string">'name2'</span>, <span class="string">'age'</span>)</div><div class="line"></div><div class="line"><span class="string">'''调用Pet类'''</span></div><div class="line">pet = Pet()</div><div class="line">pet.name2 = <span class="string">'big pig'</span></div><div class="line">pet.age = <span class="number">2</span></div><div class="line"></div><div class="line"><span class="comment"># 通过 __slots__ 变量的声明，color不允许被定义</span></div><div class="line"><span class="comment"># pet.color = 'yellow'  # AttributeError: 'Pet' object has no attribute 'color'</span></div><div class="line"><span class="comment"># print(Pet.__doc__)  # 输出注释</span></div><div class="line">print(pet.name2)  <span class="comment"># big pig</span></div><div class="line">print(pet.age)  <span class="comment"># 2</span></div><div class="line"></div><div class="line"><span class="comment"># pig 实例对象不能调用临时变量 name2，因为 __slots__变量定义的参数名称之能限定在它所在的类中，对子类不起作用</span></div><div class="line"><span class="comment"># print(pig.name2)  # AttributeError: name2</span></div></pre></td></tr></table></figure>
<p>###@property的使用</p>
<pre><code>既能检查参数，又可以`用类似属性`这样简单的方式来`访问类的变量`
</code></pre><p><strong>实现</strong></p>
<p> 关键字：<code>@property</code>,<code>@参数名.setter</code></p>
<p> 代码示例 - Pet类</p>
 <figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="string">'''Pet类'''</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Pet</span><span class="params">(object)</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">play</span><span class="params">(self)</span>:</span></div><div class="line">        print(self.__name + <span class="string">" is very good !"</span>)</div><div class="line"></div><div class="line">    <span class="string">'''@property的使用'''</span></div><div class="line">    <span class="comment"># 此处的 color 为 此类对外界声明的一个变量，即：是一个变量名</span></div><div class="line">    <span class="comment"># 此方法相当于 get_color()</span></div><div class="line"><span class="meta">    @property</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">color</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> self._color</div><div class="line"></div><div class="line">    <span class="comment"># 此方法相当于 set_color(self, color)</span></div><div class="line"><span class="meta">    @color.setter</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">color</span><span class="params">(self, color)</span>:</span></div><div class="line">        <span class="keyword">if</span> <span class="keyword">not</span> isinstance(color, str):</div><div class="line">            <span class="keyword">raise</span> ValueError(<span class="string">'input a str'</span>)</div><div class="line">        self._color = color</div></pre></td></tr></table></figure>
<p>代码示例 - 调用</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 错误的写法，验证对于参数的检验</span></div><div class="line"><span class="comment"># pet.color = 123  # ValueError: input a str</span></div><div class="line">pet2 = Pet()</div><div class="line"><span class="comment"># 为Pet类的color属性设置具体的参数</span></div><div class="line">pet2.color = <span class="string">'grew'</span></div><div class="line">print(pet2.color)  <span class="comment"># grew</span></div></pre></td></tr></table></figure>
<p>###多继承</p>
<pre><code>在设计类的继承关系时，通常，主线都是单一继承下来的，如果需要“混入”额外的功能，通过多重继承就可以实现，一个类在继承了一个类的基础上，再次继承另一个类。这种设计通常称之为`MixIn`。

MixIn的目的就是给一个类增加多个功能，这样，在设计类的时候，我们优先考虑通过多重继承来组合多个MixIn的功能，而不是设计多层次的复杂的继承关系。
</code></pre><p>如：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span><span class="params">(Mammal, RunnableMixIn, CarnivorousMixIn)</span>:</span></div><div class="line">    <span class="keyword">pass</span></div></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
      <div id="sidebar-dimmer"></div>
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/header.png"
                alt="YannisCheng" />
            
              <p class="site-author-name" itemprop="name">YannisCheng</p>
              <p class="site-description motion-element" itemprop="description">不必一味的讨好别人，每个人都有自己的活法。</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">35</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">5</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">11</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          <div class="links-of-author motion-element">
            
              
                <span class="links-of-author-item">
                  <a href="https://github.com/YannisCheng" target="_blank" title="GitHub">
                    
                      <i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
            
          </div>

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2016 &mdash; <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">YannisCheng</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">Site words total count&#58;</span>
    
    <span title="Site words total count">37.4k</span>
  
</div>









        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  
  

  

  

  

</body>
</html>
