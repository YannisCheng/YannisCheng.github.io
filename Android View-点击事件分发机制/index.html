<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">






  
  
  <link rel="stylesheet" media="all" href="/lib/Han/dist/han.min.css?v=3.3">




<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="Android,View,">










<meta name="description" content="参考：https://developer.android.com/reference/android/view/MotionEvent.html  1. View描述1.1 基本描述View 是Android中 所有控件的基类，单个控件为 VIew，多个组合为 ViewGroup。View树 的结构类似于 Web 中的DOM树。 1.2 View位置参数 参数说明：  定位View的坐标：左（l">
<meta name="keywords" content="Android,View">
<meta property="og:type" content="article">
<meta property="og:title" content="View - 点击事件分发机制">
<meta property="og:url" content="http://yannischeng.com/Android View-点击事件分发机制/index.html">
<meta property="og:site_name" content="YannisCheng&#39;s Technology Blogs">
<meta property="og:description" content="参考：https://developer.android.com/reference/android/view/MotionEvent.html  1. View描述1.1 基本描述View 是Android中 所有控件的基类，单个控件为 VIew，多个组合为 ViewGroup。View树 的结构类似于 Web 中的DOM树。 1.2 View位置参数 参数说明：  定位View的坐标：左（l">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://yannischeng-img-1258109292.cos.ap-beijing.myqcloud.com/View%20%E5%9D%90%E6%A0%87%E6%8F%8F%E8%BF%B0.png">
<meta property="og:image" content="https://yannischeng-img-1258109292.cos.ap-beijing.myqcloud.com/623378-f45e4c2e22f0e8aa.png">
<meta property="og:image" content="https://yannischeng-img-1258109292.cos.ap-beijing.myqcloud.com/%E9%80%9F%E5%BA%A6%E8%BF%BD%E8%B8%AA.png">
<meta property="og:image" content="https://yannischeng-img-1258109292.cos.ap-beijing.myqcloud.com/%E6%BB%91%E5%8A%A82.png">
<meta property="og:image" content="https://yannischeng-img-1258109292.cos.ap-beijing.myqcloud.com/%E6%BB%91%E5%8A%A8.png">
<meta property="og:image" content="https://yannischeng-img-1258109292.cos.ap-beijing.myqcloud.com/TouchSlop2.png">
<meta property="og:image" content="https://yannischeng-img-1258109292.cos.ap-beijing.myqcloud.com/%E7%82%B9%E5%87%BB%E4%BA%8B%E4%BB%B6%E5%88%86%E5%8F%91.png">
<meta property="og:image" content="https://yannischeng-img-1258109292.cos.ap-beijing.myqcloud.com/%E6%BB%91%E5%8A%A8%E5%86%B2%E7%AA%812.png">
<meta property="og:image" content="https://yannischeng-img-1258109292.cos.ap-beijing.myqcloud.com/%E6%BB%91%E5%8A%A8%E5%86%B2%E7%AA%81.png">
<meta property="og:updated_time" content="2019-02-24T00:09:51.365Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="View - 点击事件分发机制">
<meta name="twitter:description" content="参考：https://developer.android.com/reference/android/view/MotionEvent.html  1. View描述1.1 基本描述View 是Android中 所有控件的基类，单个控件为 VIew，多个组合为 ViewGroup。View树 的结构类似于 Web 中的DOM树。 1.2 View位置参数 参数说明：  定位View的坐标：左（l">
<meta name="twitter:image" content="https://yannischeng-img-1258109292.cos.ap-beijing.myqcloud.com/View%20%E5%9D%90%E6%A0%87%E6%8F%8F%E8%BF%B0.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.3',
    sidebar: {"position":"left","display":"always","offset":12,"b2t":false,"scrollpercent":false,"onmobile":true},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yannischeng.com/Android View-点击事件分发机制/">





  <title>View - 点击事件分发机制 | YannisCheng's Technology Blogs</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta custom-logo">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">YannisCheng's Technology Blogs</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">不必一味的讨好别人，每个人都有自己的活法。</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yannischeng.com/Android View-点击事件分发机制/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="YannisCheng">
      <meta itemprop="description" content>
      <meta itemprop="image" content="http://oy991qm3u.bkt.clouddn.com/%E6%A2%B5%E9%AB%98.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="YannisCheng's Technology Blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">View - 点击事件分发机制</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-01-08T13:56:58+08:00">
                2018-01-08
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2019-02-24T08:09:51+08:00">
                2019-02-24
              </time>
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Android/" itemprop="url" rel="index">
                    <span itemprop="name">Android</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  4,357 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  18 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    

    
        <div class="post-tags">
          
            <a href="/tags/Android/" rel="tag"># Android</a>
          
            <a href="/tags/View/" rel="tag"># View</a>
          
        </div>
      

    
    
    

    
      <div>
        <ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者：</strong>
    YannisCheng
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="http://yannischeng.com/Android View-点击事件分发机制/" title="View - 点击事件分发机制">http://yannischeng.com/Android View-点击事件分发机制/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>
    尊重个人劳动成果，转载请注明出处。 ─=≡Σ(((つ•̀ω•́)つ))
  </li>
</ul>

      </div>
    



    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        <blockquote>
<p>参考：<a href="https://developer.android.com/reference/android/view/MotionEvent.html" target="_blank" rel="noopener">https://developer.android.com/reference/android/view/MotionEvent.html</a></p>
</blockquote>
<h1 id="1-View描述"><a href="#1-View描述" class="headerlink" title="1. View描述"></a>1. View描述</h1><h2 id="1-1-基本描述"><a href="#1-1-基本描述" class="headerlink" title="1.1 基本描述"></a>1.1 基本描述</h2><p><code>View</code> 是Android中 <strong>所有控件的基类</strong>，单个控件为 <code>VIew</code>，多个组合为 <code>ViewGroup</code>。<code>View树</code> 的结构类似于 <code>Web
中的DOM树</code>。</p>
<h2 id="1-2-View位置参数"><a href="#1-2-View位置参数" class="headerlink" title="1.2 View位置参数"></a>1.2 View位置参数</h2><p><img src="https://yannischeng-img-1258109292.cos.ap-beijing.myqcloud.com/View%20%E5%9D%90%E6%A0%87%E6%8F%8F%E8%BF%B0.png" alt></p>
<p><strong>参数说明：</strong></p>
<ul>
<li>定位View的坐标：<strong>左（left）上（top）、右（right）下（bottom）</strong>；</li>
<li><p>获取 <code>左上右下</code>：</p>
<ul>
<li>left = getLeft();</li>
<li>top = getTop();</li>
<li>right = getRight();</li>
<li>bottom = getBottom();</li>
</ul>
</li>
<li><p><strong>x，y：</strong>相对于父容器，View左上角的坐标；</p>
</li>
<li><strong>translationX，translationY：</strong>View左上角相对于父容器的偏移量，默认为0；</li>
</ul>
<p><strong>参数换算关系：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x = left + translationX;</span><br></pre></td></tr></table></figure>
<h1 id="2-View操作相关"><a href="#2-View操作相关" class="headerlink" title="2. View操作相关"></a>2. View操作相关</h1><ul>
<li>MotionEvent：触摸事件的信息</li>
<li>TouchSlop：最小滑动距离</li>
<li>VelocityTracker：速度追踪类</li>
<li>GestureDetector：手势操作识别类</li>
<li>Scroller：</li>
</ul>
<h2 id="2-1-MotionEvent"><a href="#2-1-MotionEvent" class="headerlink" title="2.1 MotionEvent"></a>2.1 MotionEvent</h2><h3 id="2-1-1-概念描述"><a href="#2-1-1-概念描述" class="headerlink" title="2.1.1 概念描述"></a>2.1.1 概念描述</h3><ul>
<li><strong>动作代码</strong> + <strong>一组轴值</strong> 来描述运动。<ul>
<li><strong>动作代码</strong> ：发生的状态变化，如指针向下或向上</li>
<li><strong>一族轴值</strong> ：描述位置和其他运动属性</li>
</ul>
</li>
</ul>
<p>例如，当用户第一次触摸屏幕时，系统View通过动作代码 <code>ACTION_DOWN</code> 和一组包含触摸的 <code>X</code> 和 <code>Y</code> 坐标的轴值以及关于触摸的压力，大小和方向的信息接触面积。</p>
<ul>
<li><strong>运动事件</strong> 与 <strong>指针</strong></li>
</ul>
<p>有些设备可以同时报告多个移动轨迹。多点触摸屏为每个手指发出一个<strong>运动轨迹</strong>。产生运动轨迹的<strong>各个手指</strong>或<strong>其他物体</strong>被称为<strong>指针</strong>。<strong>运动事件</strong>包含有关当前活动的<strong>所有指针</strong>的<strong>信息</strong>，即使其中一些指针自从上次事件发送以来尚未移动。除非手势被取消，否则指针的数目只会随着单个指针的上下而改变。</p>
<ul>
<li><strong>指针ID</strong>” 与 <strong>索引</strong></li>
</ul>
<p>每个<strong>指针</strong>都有一个<strong>唯一的标识</strong>，当它第一次出现时被分配（用 <code>ACTION_DOWN</code> 表示 <code>ACTION_POINTER_DOWN</code>）。指针ID保持有效，直到指针最终上升（由 <code>ACTION_UP</code> 或指示 <code>ACTION_POINTER_UP</code>）或手势被取消（由指示 <code>ACTION_CANCEL</code>）。</p>
<p><strong>MotionEvent类</strong> 提供许多方法来<strong>查询</strong>位置和指针，如 <code>getX(int)，getY(int)，getAxisValue(int)， getPointerId(int)，getToolType(int)</code> 。大多数这些方法接受<strong>指针索引</strong>作为参数，而不是指针ID。事件中每个指针的指针索引的范围从0到1小于返回的值<code>getPointerCount()</code>。</p>
<p>单个指针在运动事件中出现的顺序是不确定的。因此，指针的指针索引可以从一个事件改变到下一个，但是只要指<strong>针保持活动状态</strong>，指针的<strong>指针ID就保证保持不变</strong>。使用该 <code>getPointerId(int)</code> 方法获取指针的 <code>指针ID</code>，以在手势中的所有后续运动事件中跟踪指针。然后对于连续运动事件，使用该<code>findPointerIndex(int)</code>方法获取该运动事件中给定指针标识的指针索引。</p>
<ul>
<li><strong>坐标</strong></li>
</ul>
<p>使用<strong>最新</strong>的指针坐标 ：使用<strong>getX(int)</strong>和可以<strong>getY(int)</strong>。<br>使用<strong>较早</strong>坐标 ： 使用 <strong>getHistoricalX(int, int)</strong>和访问批次内的<strong>getHistoricalY(int, int)</strong>。<br>坐标是“历史的”，只要它们比批中的当前坐标更早; 然而，它们仍然不同于之前的动作事件中报告的任何其他坐标。要按时间顺序处理批次中的所有坐标，请先消耗历史坐标，然后消耗当前坐标。</p>
<ul>
<li><strong>设备类型</strong></li>
</ul>
<p>MotionEvent内容的解释根据设备的源类别而有很大的不同。</p>
<h3 id="2-1-2-事件类型"><a href="#2-1-2-事件类型" class="headerlink" title="2.1.2 事件类型"></a>2.1.2 事件类型</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> action = MotionEventCompat.getActionMasked(event);</span><br><span class="line">   <span class="keyword">switch</span>(action) &#123;</span><br><span class="line">       <span class="keyword">case</span> MotionEvent.ACTION_DOWN:</span><br><span class="line">           <span class="keyword">break</span>;</span><br><span class="line">       <span class="keyword">case</span> MotionEvent.ACTION_MOVE:</span><br><span class="line">           <span class="keyword">break</span>;</span><br><span class="line">       <span class="keyword">case</span> MotionEvent.ACTION_UP:</span><br><span class="line">           <span class="keyword">break</span>;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p>ACTION_MASK : 作为动作本身的动作代码部分的位掩码</p>
<table>
<thead>
<tr>
<th style="text-align:left">常量 getActionMasked()</th>
<th style="text-align:center">非触摸事件，所以它被传递给 onGenericMotionEvent(MotionEvent)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">ACTION_BUTTON_PRESS</td>
<td style="text-align:center">按钮已被按下。常量值：11（0x0000000b）</td>
</tr>
<tr>
<td style="text-align:left">ACTION_BUTTON_RELEASE</td>
<td style="text-align:center">一个按钮已被释放。常量值：12（0x0000000c）</td>
</tr>
<tr>
<td style="text-align:left">ACTION_HOVER_ENTER</td>
<td style="text-align:center">指针未关闭，但已经进入窗口或视图的边界。常量值：9（0x00000009）</td>
</tr>
<tr>
<td style="text-align:left">ACTION_HOVER_EXIT</td>
<td style="text-align:center">指针没有关闭，但已经退出了窗口或视图的边界。常量值：10（0x0000000a）</td>
</tr>
<tr>
<td style="text-align:left">ACTION_HOVER_MOVE</td>
<td style="text-align:center">发生了改变，但指针没有下降（不像ACTION_MOVE）常量值：7（0x00000007）</td>
</tr>
<tr>
<td style="text-align:left">ACTION_SCROLL</td>
<td style="text-align:center">运动事件包含相对垂直和/或水平滚动偏移。常量值：8（0x00000008）</td>
</tr>
</tbody>
</table>
<hr>
<table>
<thead>
<tr>
<th style="text-align:left">常量 getActionMasked()</th>
<th style="text-align:center">使用getButtonState()检索按钮状态</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">ACTION_DOWN</td>
<td style="text-align:center">按下的手势已经开始，运动包含初始起始位置。常量值：0（0x00000000）</td>
</tr>
<tr>
<td style="text-align:left">ACTION_MOVE</td>
<td style="text-align:center">在按下手势期间（在ACTION_DOWN和之间ACTION_UP）发生改变。常数值：2（0x00000002）</td>
</tr>
<tr>
<td style="text-align:left">ACTION_UP</td>
<td style="text-align:center">按下的手势已经完成，常数值 : 1 (0x00000001)</td>
</tr>
<tr>
<td style="text-align:left">ACTION_CANCEL</td>
<td style="text-align:center">当前手势已被中止。如果父视图希望拦截其中的一些事件，不再继续转发事件给这个子视图的话，那么就需要给子视图一个ACTION_CANCEL事件。常数值 :  3 (0x00000003)</td>
</tr>
<tr>
<td style="text-align:left">ACTION_OUTSIDE</td>
<td style="text-align:center">移动发生在UI元素的正常界限之外。注意：由于任何事件的位置都将超出视图层次结构的范围，因此默认情况下不会将其分派给ViewGroup的任何子项。因此，ACTION_OUTSIDE的移动应该以根View或适当的方式Window.Callback （例如Activity或Dialog）来处理。常量值：4（0x00000004）</td>
</tr>
<tr>
<td style="text-align:left">ACTION_POINTER_DOWN</td>
<td style="text-align:center">非主指针已关闭</td>
</tr>
<tr>
<td style="text-align:left">ACTION_POINTER_UP</td>
<td style="text-align:center">非主指针已经上升。</td>
</tr>
<tr>
<td style="text-align:left">ACTION_POINTER_INDEX_MASK</td>
<td style="text-align:center">代表指针索引的动作代码中的位，与 ACTION_POINTER_DOWN和一起使用</td>
</tr>
<tr>
<td style="text-align:left">ACTION_POINTER_UP。</td>
<td style="text-align:center">非主指针已经上升。常量值：1（0x00000001）</td>
</tr>
<tr>
<td style="text-align:left">ACTION_POINTER_INDEX_SHIFT</td>
<td style="text-align:center">按照定义，保存指针索引的动作位的位移ACTION_POINTER_INDEX_MASK</td>
</tr>
</tbody>
</table>
<h2 id="2-1-3-主要公共方法"><a href="#2-1-3-主要公共方法" class="headerlink" title="2.1.3 主要公共方法"></a>2.1.3 主要公共方法</h2><table>
<thead>
<tr>
<th style="text-align:left">公共方法</th>
<th style="text-align:center">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">getAction()</td>
<td style="text-align:center">返回正在执行的操作。</td>
</tr>
<tr>
<td style="text-align:left">getActionButton()</td>
<td style="text-align:center">获取在按下或释放操作期间哪个按钮已被修改。</td>
</tr>
<tr>
<td style="text-align:left">findPointerIndex(int pointerId)</td>
<td style="text-align:center">给定一个指针标识符，在事件中找到它的数据索引</td>
</tr>
<tr>
<td style="text-align:left">getActionIndex()</td>
<td style="text-align:center">对于ACTION_POINTER_DOWN或ACTION_POINTER_UP 作为返回getActionMasked()，这将返回关联的指针索引。</td>
</tr>
<tr>
<td style="text-align:left">getActionMasked()</td>
<td style="text-align:center">返回正在执行的被屏蔽的操作，没有指针索引信息。</td>
</tr>
<tr>
<td style="text-align:left">getDeviceId()</td>
<td style="text-align:center">获取此事件来自的设备的ID。</td>
</tr>
<tr>
<td style="text-align:left">getDownTime()</td>
<td style="text-align:center">返回用户最初按下时启动位置事件流的时间（以毫秒为单位）。</td>
</tr>
<tr>
<td style="text-align:left">getFlags()</td>
<td style="text-align:center">获取运动事件标志。</td>
</tr>
<tr>
<td style="text-align:left">getHistoricalEventTime(int pos)</td>
<td style="text-align:center">返回在此事件和上一个事件之间发生历史移动的uptimeMillis()时间。</td>
</tr>
<tr>
<td style="text-align:left">getHistoricalOrientation(int pointerIndex, int pos)</td>
<td style="text-align:center">根据getOrientation(int)在此事件与给定指针的上一个事件之间发生的历史方向坐标返回历史方向坐标。</td>
</tr>
<tr>
<td style="text-align:left">setSource(int source)</td>
<td style="text-align:center">修改事件的来源。</td>
</tr>
<tr>
<td style="text-align:left">setLocation(float x, float y)</td>
<td style="text-align:center">设置这个事件的位置。</td>
</tr>
<tr>
<td style="text-align:left">offsetLocation(float deltaX, float deltaY)</td>
<td style="text-align:center">调整此事件的位置。</td>
</tr>
<tr>
<td style="text-align:left">setAction(int action)</td>
<td style="text-align:center">设置此事件的操作。</td>
</tr>
<tr>
<td style="text-align:left">recycle()</td>
<td style="text-align:center">回收MotionEvent，以供稍后调用者重新使用。</td>
</tr>
<tr>
<td style="text-align:left">getYPrecision()</td>
<td style="text-align:center">返回正在报告的Y坐标的精度。</td>
</tr>
<tr>
<td style="text-align:left">getY(int pointerIndex)</td>
<td style="text-align:center">返回给定指针索引的此事件的Y坐标 （用于getPointerId(int)查找此索引的指针标识符）。</td>
</tr>
<tr>
<td style="text-align:left">getY()</td>
<td style="text-align:center">getY(int) 为第一个指针索引（可能是一个任意的指针标识符）。</td>
</tr>
<tr>
<td style="text-align:left">getRawY()</td>
<td style="text-align:center">返回此事件的原始Y坐标。</td>
</tr>
<tr>
<td style="text-align:left">getPressure(int pointerIndex)</td>
<td style="text-align:center">返回给定指针索引的此事件的当前压力 （用于getPointerId(int)查找此索引的指针标识符）。</td>
</tr>
<tr>
<td style="text-align:left">getSize(int pointerIndex)</td>
<td style="text-align:center">返回给定指针索引的近似大小的缩放值 （用于getPointerId(int)查找此索引的指针标识符）。</td>
</tr>
<tr>
<td style="text-align:left">getPointerCount()</td>
<td style="text-align:center">包含在这个事件中的数据指针的数量。</td>
</tr>
<tr>
<td style="text-align:left">getOrientation(int pointerIndex)</td>
<td style="text-align:center">返回给定指针索引（用于getPointerId(int)查找此索引的指针标识符）的触摸区域和工具区域的方向，从垂直方向顺时针旋转弧度。</td>
</tr>
<tr>
<td style="text-align:left">getSource()</td>
<td style="text-align:center">获取事件的来源。</td>
</tr>
</tbody>
</table>
<h3 id="2-1-4-事件坐标的含义"><a href="#2-1-4-事件坐标的含义" class="headerlink" title="2.1.4 事件坐标的含义"></a>2.1.4 事件坐标的含义</h3><ul>
<li>getX()和getY()：<strong>相对坐标值</strong>，相对于消费这个事件的视图的左上点的坐标。</li>
<li>getRawX()和getRawY(): <strong>绝对坐标值</strong>，相对于屏幕。</li>
</ul>
<p><img src="https://yannischeng-img-1258109292.cos.ap-beijing.myqcloud.com/623378-f45e4c2e22f0e8aa.png" alt></p>
<h3 id="2-1-5-Pointer概念"><a href="#2-1-5-Pointer概念" class="headerlink" title="2.1.5 Pointer概念"></a>2.1.5 Pointer概念</h3><p>为了可以表示多个触摸点的动作，MotionEvent中引入了Pointer的概念，一个pointer就代表一个触摸点，每个pointer都有自己的事件类型，也有自己的横轴坐标值。一个MotionEvent对象中可能会存储多个pointer的相关信息，每个pointer都会有一个自己的id和index。pointer的id在整个事件流中是不会发生变化的，但是index会发生变化。</p>
<p>MotionEvent类中的很多方法都是可以传入一个int值作为参数的，其实传入的就是pointer的index值。比如getX(pointerIndex)和getY(pointerIndex)，此时，它们返回的就是index所代表的触摸点相关事件坐标值。</p>
<p>由于pointer的index值在不同的MotionEvent对象中会发生变化，但是id值却不会变化。所以，当我们要记录一个触摸点的事件流时，就只需要保存其id,然后使用findPointerIndex(int)来获得其index值，然后再获得其他信息。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">int</span> INVALID_ID = -<span class="number">1</span>;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">int</span> mActivePointerId = INVALID_ID;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">int</span> mSecondaryPointerId = INVALID_ID;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">float</span> mPrimaryLastX = -<span class="number">1</span>;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">float</span> mPrimaryLastY = -<span class="number">1</span>;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">float</span> mSecondaryLastX = -<span class="number">1</span>;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">float</span> mSecondaryLastY = -<span class="number">1</span>;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onTouchEvent</span><span class="params">(MotionEvent event)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">int</span> action = MotionEventCompat.getActionMasked(event);</span><br><span class="line"></span><br><span class="line">       <span class="keyword">switch</span> (action) &#123;</span><br><span class="line">           <span class="keyword">case</span> MotionEvent.ACTION_DOWN:</span><br><span class="line">               <span class="keyword">int</span> index = event.getActionIndex();</span><br><span class="line">               mActivePointerId = event.getPointerId(index);</span><br><span class="line">               mPrimaryLastX = MotionEventCompat.getX(event,index);</span><br><span class="line">               mPrimaryLastY = MotionEventCompat.getY(event,index);</span><br><span class="line">               <span class="keyword">break</span>;</span><br><span class="line">           <span class="keyword">case</span> MotionEvent.ACTION_POINTER_DOWN:</span><br><span class="line">               <span class="keyword">int</span> index = event.getActionIndex();</span><br><span class="line">               mSecondaryPointerId = event.getPointerId(index);</span><br><span class="line">               mSecondaryLastX = event.getX(index);</span><br><span class="line">               mSecondaryLastY = event.getY(index);</span><br><span class="line">               <span class="keyword">break</span>;</span><br><span class="line">           <span class="keyword">case</span> MotionEvent.ACTION_MOVE:</span><br><span class="line">               <span class="keyword">int</span> index = event.findPointerIndex(mActivePointerId);</span><br><span class="line">               <span class="keyword">int</span> secondaryIndex = MotionEventCompat.findPointerIndex(event,mSecondaryPointerId);</span><br><span class="line">               <span class="keyword">final</span> <span class="keyword">float</span> x = MotionEventCompat.getX(event,index);</span><br><span class="line">               <span class="keyword">final</span> <span class="keyword">float</span> y = MotionEventCompat.getY(event,index);</span><br><span class="line">               <span class="keyword">final</span> <span class="keyword">float</span> secondX = MotionEventCompat.getX(event,secondaryIndex);</span><br><span class="line">               <span class="keyword">final</span> <span class="keyword">float</span> secondY = MotionEventCompat.getY(event,secondaryIndex);</span><br><span class="line">               <span class="keyword">break</span>;</span><br><span class="line">           <span class="keyword">case</span> MotionEvent.ACTION_POINTER_UP:</span><br><span class="line">               xxxxxx(涉及pointer id的转换，之后的文章会讲解)</span><br><span class="line">               <span class="keyword">break</span>;</span><br><span class="line">           <span class="keyword">case</span> MotionEvent.ACTION_UP:</span><br><span class="line">           <span class="keyword">case</span> MotionEvent.ACTION_CANCEL:</span><br><span class="line">               mActivePointerId = INVALID_ID;</span><br><span class="line">               mPrimaryLastX =-<span class="number">1</span>;</span><br><span class="line">               mPrimaryLastY = -<span class="number">1</span>;</span><br><span class="line">               <span class="keyword">break</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p>除了pointer的概念，MotionEvent还引入了两个事件类型：</p>
<ul>
<li>ACTION_POINTER_DOWN:代表用户又使用一个手指触摸到屏幕上，也就是说，在已经有一个触摸点的情况下，有新出现了一个触摸点。</li>
<li>ACTION_POINTER_UP:代表用户的一个手指离开了触摸屏，但是还有其他手指还在触摸屏上。也就是说，在多个触摸点存在的情况下，其中一个触摸点消失了。它与ACTION_UP的区别就是，它是在多个触摸点中的一个触摸点消失时（此时，还有触摸点存在，也就是说用户还有手指触摸屏幕）产生，而ACTION_UP可以说是最后一个触摸点消失时产生。</li>
</ul>
<p>那么，用户先两个手指先后接触屏幕，同时滑动，然后在先后离开这一套动作所产生的事件流是什么样的呢？它所产生的事件流如下：</p>
<ul>
<li>先产生一个ACTION_DOWN事件，代表用户的第一个手指接触到了屏幕。</li>
<li>再产生一个ACTION_POINTER_DOWN事件，代表用户的第二个手指接触到了屏幕。<br>很多的ACTION_MOVE事件，但是在这些MotionEvent对象中，都保存着两个触摸点滑动的信息</li>
<li>一个ACTION_POINTER_UP事件，代表用户的一个手指离开了屏幕。<br>如果用户剩下的手指还在滑动时，就会产生很多ACTION_MOVE事件。</li>
<li>一个ACTION_UP事件，代表用户的最后一个手指离开了屏幕</li>
</ul>
<h2 id="2-2-VelocityTracker"><a href="#2-2-VelocityTracker" class="headerlink" title="2.2 VelocityTracker"></a>2.2 VelocityTracker</h2><p>速度追踪。</p>
<p>追踪手指在滑动过程中水平或者垂直方向的速度。</p>
<p><strong>使用步骤：</strong></p>
<ul>
<li><strong>追踪当前事件：</strong>其应用在方法 <code>onTouchEvent()</code> 中</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">VelocityTracker velocityTracker = VelocityTracker.obtain();</span><br><span class="line">velocityTracker.addMovement(event);</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>获取当前事件的滑动速度：</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 计算速度 </span></span><br><span class="line">velocityTracker.computerCurrentVelocity(<span class="number">1000</span>);</span><br><span class="line"><span class="comment">// 获取速度 </span></span><br><span class="line"><span class="keyword">int</span> getXVT  = velocityTracker.getXVelocity();</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>回收</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">velocityTracker.clear();</span><br><span class="line">velocityTracker.recycler();</span><br></pre></td></tr></table></figure>
<p><img src="https://yannischeng-img-1258109292.cos.ap-beijing.myqcloud.com/%E9%80%9F%E5%BA%A6%E8%BF%BD%E8%B8%AA.png" alt></p>
<h2 id="2-3-GestureDetector"><a href="#2-3-GestureDetector" class="headerlink" title="2.3 GestureDetector"></a>2.3 GestureDetector</h2><p>手势检测。</p>
<p>检测用户的单击、滑动、长按、双击等行为。</p>
<p><strong>使用步骤：</strong></p>
<ul>
<li><strong>创建</strong></li>
</ul>
<p>创建一个 <code>GestureDetector</code> 对象并实现 <code>OnGestureListener</code> 接口。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">GestureDetector gestureDetector = <span class="keyword">new</span> GestureDetector(<span class="keyword">this</span>);</span><br><span class="line"><span class="comment">// 解决长按屏幕无法拖动的现象</span></span><br><span class="line">gestureDetector.setIsLongpressEnabled(<span class="keyword">false</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>接管标View的 <code>onTouchEvent()</code></strong></li>
</ul>
<p>在目标View的 <code>onTouchEvent()</code> 中实现如下操作：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">boolean</span> consumer = gestureDetector.onTouchEvent(event);</span><br><span class="line"><span class="keyword">return</span> consumer;</span><br></pre></td></tr></table></figure>
<h2 id="2-4-View滑动"><a href="#2-4-View滑动" class="headerlink" title="2.4 View滑动"></a>2.4 View滑动</h2><p><img src="https://yannischeng-img-1258109292.cos.ap-beijing.myqcloud.com/%E6%BB%91%E5%8A%A82.png" alt></p>
<p><img src="https://yannischeng-img-1258109292.cos.ap-beijing.myqcloud.com/%E6%BB%91%E5%8A%A8.png" alt></p>
<h2 id="2-5-TouchSlop"><a href="#2-5-TouchSlop" class="headerlink" title="2.5 TouchSlop"></a>2.5 TouchSlop</h2><p>最小滑动距离</p>
<p><img src="https://yannischeng-img-1258109292.cos.ap-beijing.myqcloud.com/TouchSlop2.png" alt></p>
<h1 id="3-View点击事件分发机制"><a href="#3-View点击事件分发机制" class="headerlink" title="3. View点击事件分发机制"></a>3. View点击事件分发机制</h1><h2 id="3-1-机制描述"><a href="#3-1-机制描述" class="headerlink" title="3.1 机制描述"></a>3.1 机制描述</h2><p>所谓的 <code>点击事件分发</code> 实际就是对 <code>MotionEvent事件的分发</code> 过程。即：将一个产生的 <code>MotionEvent事件</code> 传递给一个具体的View，这个传递的过程就是 <code>点击事件分发</code>。</p>
<p><strong><code>onTouchEvent()</code></strong> 是真正用来进行<code>业务逻辑处理</code> 的地方，返回true表示已经将该事件消费，返回false表明事件继续传递。</p>
<p><strong><code>onInterceptTouchEvent()</code></strong> 是用来进行 <code>判断</code> 是否需要对事件进行 <code>拦截</code> 从而阻止其继续往子组件传递的，返回false表示无需拦截，则递归的调用子组件的<code>dispatchTouchEvent()</code>方法；返回true表示需要拦截，则直接调用本组件的 <code>onTouchEvent()</code> 方法进行处理。</p>
<p>一般我们是在<code>View</code>的<code>onTouchEvent()</code>方法中处理<code>MotionEvent</code>对象的.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onTouchEvent</span><span class="params">(MotionEvent event)</span></span></span><br></pre></td></tr></table></figure>
<hr>
<p>不同View组合，所持有的方法不同。</p>
<ul>
<li><strong>View.java</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">dispatchTouchEvent</span><span class="params">(MotionEvent event)</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onTouchEvent</span><span class="params">(MotionEvent event)</span></span></span><br></pre></td></tr></table></figure>
<p><code>View</code> 没有 <code>onInterceptTouchEvent()</code>。</p>
<ul>
<li><strong>ViewGroup.java</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">dispatchTouchEvent</span><span class="params">(MotionEvent event)</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onTouchEvent</span><span class="params">(MotionEvent event)</span> </span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onInterceptTouchEvent</span><span class="params">(MotionEvent event)</span></span></span><br></pre></td></tr></table></figure>
<p><code>ViewGroup</code> 默认不拦截任何事件， <code>onInterceptTouchEvent()</code> 方法默认值为 <code>false</code>。</p>
<h2 id="3-2-对点击事件的分发"><a href="#3-2-对点击事件的分发" class="headerlink" title="3.2 对点击事件的分发"></a>3.2 对点击事件的分发</h2><h3 id="3-2-1-事件由-Activity-分发至-View"><a href="#3-2-1-事件由-Activity-分发至-View" class="headerlink" title="3.2.1 事件由 Activity 分发至 View"></a>3.2.1 事件由 Activity 分发至 View</h3><p><strong>Activity类</strong> 中的 <strong><code>dispatchTouchEvent()</code></strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// line : 3396</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">dispatchTouchEvent</span><span class="params">(MotionEvent ev)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (ev.getAction() == MotionEvent.ACTION_DOWN) &#123;</span><br><span class="line">        onUserInteraction();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (getWindow().superDispatchTouchEvent(ev)) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> onTouchEvent(ev);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>代码中的 <code>getWindow().superDispatchTouchEvent(ev)</code> 就是 <strong>Window抽象类</strong> 中的 <strong><code>superDispatchTouchEvent(MotionEvent event)</code></strong> 抽象方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// linne : 1635</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">boolean</span> <span class="title">superDispatchTouchEvent</span><span class="params">(MotionEvent event)</span></span>;</span><br></pre></td></tr></table></figure>
<p><strong>Window抽象类</strong> 的具体实现类是 <strong>PhoneWindow类</strong>，对应的方法是：<strong><code>superDispatchTouchEvent(MotionEvent event)</code></strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// line : 1828</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">superDispatchTouchEvent</span><span class="params">(MotionEvent event)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> mDecor.superDispatchTouchEvent(event);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>代码中的 <code>mDecor.superDispatchTouchEvent(event);</code> 指的就是 <strong>DecorView类</strong> 中的 <strong><code>superDispatchTouchEvent(MotionEvent event)</code></strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// line : 439</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">superDispatchTouchEvent</span><span class="params">(MotionEvent event)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">super</span>.dispatchTouchEvent(event);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>而 <strong>DecorView类</strong> 继承 <strong>FrameLayout类</strong>，<strong>FrameLayout类</strong> 继承 <strong>ViewGroup类</strong>，<strong>ViewGroup类</strong> 继承 <strong>View类</strong>。所以此处调用的 <strong><code>dispatchTouchEvent(event)</code></strong> 就是 <strong>View类</strong> 中的方法。</p>
<p>到此为止，<strong>事件</strong> 已经从 <code>Activity</code> 传到了 <code>View</code>。一下将要进行的就是在 <code>View</code> 与 <code>ViewGroup</code> 中进行事件的传递。</p>
<h3 id="3-2-2-事件在-VIew-与-ViewGroup-中分发"><a href="#3-2-2-事件在-VIew-与-ViewGroup-中分发" class="headerlink" title="3.2.2 事件在 VIew 与 ViewGroup 中分发"></a>3.2.2 事件在 VIew 与 ViewGroup 中分发</h3><p><strong>View类</strong> 中的 <code>dispatchTouchEvent(MotionEvent event)</code> ：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// line : 12478</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">dispatchTouchEvent</span><span class="params">(MotionEvent event)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// If the event should be handled by accessibility focus first.</span></span><br><span class="line">    <span class="keyword">if</span> (event.isTargetAccessibilityFocus()) &#123;</span><br><span class="line">        <span class="comment">// We don't have focus or no virtual descendant has it, do not handle the event.</span></span><br><span class="line">        <span class="keyword">if</span> (!isAccessibilityFocusedViewOrHost()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// We have focus and got the event, then use normal event dispatch.</span></span><br><span class="line">        event.setTargetAccessibilityFocus(<span class="keyword">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">boolean</span> result = <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (mInputEventConsistencyVerifier != <span class="keyword">null</span>) &#123;</span><br><span class="line">        mInputEventConsistencyVerifier.onTouchEvent(event, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">	……</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (!result &amp;&amp; mInputEventConsistencyVerifier != <span class="keyword">null</span>) &#123;</span><br><span class="line">	    mInputEventConsistencyVerifier.onUnhandledEvent(event, <span class="number">0</span>);</span><br><span class="line">	&#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>由于 <strong>View</strong> 只有自己本身，所以没有 <code>onInterceptTouchEvent(MotionEvent event)</code> 方法。<br>在这个方法中，如果事件被处理，那么就执行 <code>onTouchEvent(event, 0)</code>；若是事件没有被处理，那么执行 <code>onUnhandledEvent(event, 0);</code></p>
<p><strong>ViewGroup类</strong> 中的 <code>dispatchTouchEvent(MotionEvent event)</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// line : 2541</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">dispatchTouchEvent</span><span class="params">(MotionEvent ev)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 执行事件消耗： onTouchEvent();</span></span><br><span class="line">    <span class="keyword">if</span> (mInputEventConsistencyVerifier != <span class="keyword">null</span>) &#123;</span><br><span class="line">        mInputEventConsistencyVerifier.onTouchEvent(ev, <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">	……</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 执行 拦截 判断：onInterceptTouchEvent(ev)</span></span><br><span class="line">	<span class="keyword">boolean</span> handled = <span class="keyword">false</span>;</span><br><span class="line">	<span class="keyword">if</span> (onFilterTouchEventForSecurity(ev)) &#123;</span><br><span class="line">	</span><br><span class="line">	……</span><br><span class="line">	</span><br><span class="line">	    <span class="comment">// Check for interception.</span></span><br><span class="line">	    <span class="keyword">final</span> <span class="keyword">boolean</span> intercepted;</span><br><span class="line">	    <span class="keyword">if</span> (actionMasked == MotionEvent.ACTION_DOWN</span><br><span class="line">	            || mFirstTouchTarget != <span class="keyword">null</span>) &#123;</span><br><span class="line">	        <span class="keyword">final</span> <span class="keyword">boolean</span> disallowIntercept = (mGroupFlags &amp; FLAG_DISALLOW_INTERCEPT) != <span class="number">0</span>;</span><br><span class="line">	        <span class="keyword">if</span> (!disallowIntercept) &#123;</span><br><span class="line">	            intercepted = onInterceptTouchEvent(ev);</span><br><span class="line">	            ev.setAction(action); <span class="comment">// restore action in case it was changed</span></span><br><span class="line">	        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">	            intercepted = <span class="keyword">false</span>;</span><br><span class="line">	        &#125;</span><br><span class="line">	    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">	        intercepted = <span class="keyword">true</span>;</span><br><span class="line">	    &#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 未能处理事件</span></span><br><span class="line">	<span class="keyword">if</span> (!handled &amp;&amp; mInputEventConsistencyVerifier != <span class="keyword">null</span>) &#123;</span><br><span class="line">        mInputEventConsistencyVerifier.onUnhandledEvent(ev, <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 返回值</span></span><br><span class="line">    <span class="keyword">return</span> handled;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在这个处理过程中需要一个 <strong>InputEventConsistencyVerifier类</strong>（<code>public final class InputEventConsistencyVerifier{}</code>），这个类的作用是：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">检查输入事件序列是否自洽。记录检测到的每个问题的描述。检测到问题时，事件会受到污染。 此机制可防止多次报告同一错误。</span><br></pre></td></tr></table></figure>
<p>而 <strong><code>dispatchTouchEvent(MotionEvent ev)</code></strong> 方法中用到的 <strong><code>onInterceptTouchEvent(MotionEvent event)</code></strong> 、<strong><code>onTouchEvent(ev, 1)</code></strong> 与 <strong><code>onUnhandledEvent(ev, 1)</code></strong> 都属于 <strong>InputEventConsistencyVerifier类</strong>。</p>
<p><strong>InputEventConsistencyVerifier类</strong> 中的 <strong><code>onInterceptTouchEvent(MotionEvent event)</code></strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// line : 3192</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onInterceptTouchEvent</span><span class="params">(MotionEvent ev)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (ev.isFromSource(InputDevice.SOURCE_MOUSE)</span><br><span class="line">            &amp;&amp; ev.getAction() == MotionEvent.ACTION_DOWN</span><br><span class="line">            &amp;&amp; ev.isButtonPressed(MotionEvent.BUTTON_PRIMARY)</span><br><span class="line">            &amp;&amp; isOnScrollbarThumb(ev.getX(), ev.getY())) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>InputEventConsistencyVerifier类</strong> 中的 <strong><code>onTouchEvent(MotionEvent event, int nestingLevel)</code></strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// line : 322</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onTouchEvent</span><span class="params">(MotionEvent event, <span class="keyword">int</span> nestingLevel)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!startEvent(event, nestingLevel, EVENT_TYPE_TOUCH)) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">int</span> action = event.getAction();</span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">boolean</span> newStream = action == MotionEvent.ACTION_DOWN</span><br><span class="line">            || action == MotionEvent.ACTION_CANCEL || action == MotionEvent.ACTION_OUTSIDE;</span><br><span class="line">    <span class="keyword">if</span> (newStream &amp;&amp; (mTouchEventStreamIsTainted || mTouchEventStreamUnhandled)) &#123;</span><br><span class="line">        mTouchEventStreamIsTainted = <span class="keyword">false</span>;</span><br><span class="line">        mTouchEventStreamUnhandled = <span class="keyword">false</span>;</span><br><span class="line">        mTouchEventStreamPointers = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (mTouchEventStreamIsTainted) &#123;</span><br><span class="line">        event.setTainted(<span class="keyword">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">	……</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//  结束事件</span></span><br><span class="line">    finishEvent();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>InputEventConsistencyVerifier类</strong> 中的 <strong><code>onUnhandledEvent(InputEvent event, int nestingLevel)</code></strong></p>
<p>`通知验证者给定事件未处理，并且应忽略事件的其余跟踪。<br>只有在事先由一致性验证程序使用{@link #onInputEvent}和其他方法检查事件时，才应调用此方法。</p>
<pre><code>* @param事件该事件。
* @param nestingLevel嵌套级别：如果从基类调用，则为0，或者从子类调用1。 如果此一致性验证程序已在更高的嵌套级别检查了该事件，则不会再次检查该事件。 用于处理子类调度方法委托给其超类的调度方法并且两个调度方法调用一致性验证程序的情况。`
</code></pre><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// line : 582</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onUnhandledEvent</span><span class="params">(InputEvent event, <span class="keyword">int</span> nestingLevel)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (nestingLevel != mLastNestingLevel) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (mRecentEventsUnhandled != <span class="keyword">null</span>) &#123;</span><br><span class="line">        mRecentEventsUnhandled[mMostRecentEventIndex] = <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (event <span class="keyword">instanceof</span> KeyEvent) &#123;</span><br><span class="line">        <span class="keyword">final</span> KeyEvent keyEvent = (KeyEvent)event;</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">int</span> deviceId = keyEvent.getDeviceId();</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">int</span> source = keyEvent.getSource();</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">int</span> keyCode = keyEvent.getKeyCode();</span><br><span class="line">        <span class="keyword">final</span> KeyState state = findKeyState(deviceId, source, keyCode, <span class="comment">/*remove*/</span> <span class="keyword">false</span>);</span><br><span class="line">        <span class="keyword">if</span> (state != <span class="keyword">null</span>) &#123;</span><br><span class="line">            state.unhandled = <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">final</span> MotionEvent motionEvent = (MotionEvent)event;</span><br><span class="line">        <span class="keyword">if</span> (motionEvent.isTouchEvent()) &#123;</span><br><span class="line">            mTouchEventStreamUnhandled = <span class="keyword">true</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> ((motionEvent.getSource() &amp; InputDevice.SOURCE_CLASS_TRACKBALL) != <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (mTrackballDown) &#123;</span><br><span class="line">                mTrackballUnhandled = <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://yannischeng-img-1258109292.cos.ap-beijing.myqcloud.com/%E7%82%B9%E5%87%BB%E4%BA%8B%E4%BB%B6%E5%88%86%E5%8F%91.png" alt></p>
<h1 id="4-滑动冲突"><a href="#4-滑动冲突" class="headerlink" title="4 滑动冲突"></a>4 滑动冲突</h1><p>解决滑动冲突的重点：根据业务实际需要，分析问题原因。</p>
<p><img src="https://yannischeng-img-1258109292.cos.ap-beijing.myqcloud.com/%E6%BB%91%E5%8A%A8%E5%86%B2%E7%AA%812.png" alt></p>
<p>入手点基本是通过 <code>滑动方向</code> 差异这个问题入手的，在 父View中操作的是 <code>onInterceptTouchEvent()</code> 方法中的 <code>MotionEvent</code> 对象。</p>
<p><img src="https://yannischeng-img-1258109292.cos.ap-beijing.myqcloud.com/%E6%BB%91%E5%8A%A8%E5%86%B2%E7%AA%81.png" alt></p>

      
    </div>
    
    
    

    

    


    <footer class="post-footer">
      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/Android使用频率较少的控件/" rel="next" title="Android 使用频率较少的控件">
                <i class="fa fa-chevron-left"></i> Android 使用频率较少的控件
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/开源库-RxJava/" rel="prev" title="开源库-RxJava">
                开源库-RxJava <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
      <div id="sidebar-dimmer"></div>
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="http://oy991qm3u.bkt.clouddn.com/%E6%A2%B5%E9%AB%98.gif" alt="YannisCheng">
            
              <p class="site-author-name" itemprop="name">YannisCheng</p>
              <p class="site-description motion-element" itemprop="description">不必一味的讨好别人，每个人都有自己的活法。</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">176</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">29</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">75</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          <div class="links-of-author motion-element">
            
              
                <span class="links-of-author-item">
                  <a href="https://github.com/YannisCheng" target="_blank" title="GitHub">
                    
                      <i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  <a href="mailto:cwj1714@163.com" target="_blank" title="E-Mail">
                    
                      <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
            
          </div>

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#1-View描述"><span class="nav-number">1.</span> <span class="nav-text">1. View描述</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-1-基本描述"><span class="nav-number">1.1.</span> <span class="nav-text">1.1 基本描述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-2-View位置参数"><span class="nav-number">1.2.</span> <span class="nav-text">1.2 View位置参数</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2-View操作相关"><span class="nav-number">2.</span> <span class="nav-text">2. View操作相关</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#2-1-MotionEvent"><span class="nav-number">2.1.</span> <span class="nav-text">2.1 MotionEvent</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-1-概念描述"><span class="nav-number">2.1.1.</span> <span class="nav-text">2.1.1 概念描述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-2-事件类型"><span class="nav-number">2.1.2.</span> <span class="nav-text">2.1.2 事件类型</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-1-3-主要公共方法"><span class="nav-number">2.2.</span> <span class="nav-text">2.1.3 主要公共方法</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-4-事件坐标的含义"><span class="nav-number">2.2.1.</span> <span class="nav-text">2.1.4 事件坐标的含义</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-5-Pointer概念"><span class="nav-number">2.2.2.</span> <span class="nav-text">2.1.5 Pointer概念</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-2-VelocityTracker"><span class="nav-number">2.3.</span> <span class="nav-text">2.2 VelocityTracker</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-3-GestureDetector"><span class="nav-number">2.4.</span> <span class="nav-text">2.3 GestureDetector</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-4-View滑动"><span class="nav-number">2.5.</span> <span class="nav-text">2.4 View滑动</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-5-TouchSlop"><span class="nav-number">2.6.</span> <span class="nav-text">2.5 TouchSlop</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#3-View点击事件分发机制"><span class="nav-number">3.</span> <span class="nav-text">3. View点击事件分发机制</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#3-1-机制描述"><span class="nav-number">3.1.</span> <span class="nav-text">3.1 机制描述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-2-对点击事件的分发"><span class="nav-number">3.2.</span> <span class="nav-text">3.2 对点击事件的分发</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-1-事件由-Activity-分发至-View"><span class="nav-number">3.2.1.</span> <span class="nav-text">3.2.1 事件由 Activity 分发至 View</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-2-事件在-VIew-与-ViewGroup-中分发"><span class="nav-number">3.2.2.</span> <span class="nav-text">3.2.2 事件在 VIew 与 ViewGroup 中分发</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#4-滑动冲突"><span class="nav-number">4.</span> <span class="nav-text">4 滑动冲突</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2016 &mdash; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">YannisCheng</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">Site words total count&#58;</span>
    
    <span title="Site words total count">416.2k</span>
  
</div>













        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.3"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.3"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	





  





  












  





  

  

  
  

  
  


  
  <script type="text/javascript" src="/js/src/js.cookie.js?v=5.1.3"></script>
  <script type="text/javascript" src="/js/src/scroll-cookie.js?v=5.1.3"></script>


  


<script type="text/javascript" color="18,146,19" opacity="0.7" zindex="-1" count="0" src="//cdn.bootcss.com/canvas-nest.js/1.0.1/canvas-nest.min.js"></script>

</body>
</html>
